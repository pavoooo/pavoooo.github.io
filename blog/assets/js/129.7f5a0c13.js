(window.webpackJsonp=window.webpackJsonp||[]).push([[129],{172:function(s,a,n){"use strict";n.r(a);var t=n(0),e=Object(t.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("div",{staticClass:"content"},[n("h1",[s._v("sed介绍")]),s._v(" "),n("h2",{attrs:{id:"sed的模式空间"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sed的模式空间","aria-hidden":"true"}},[s._v("#")]),s._v(" sed的模式空间")]),s._v(" "),n("p",[n("code",[s._v("sed")]),s._v("的基本工作方式如下：")]),s._v(" "),n("ul",[n("li",[s._v("将文件以行为单位读取到内存中（模式空间）")]),s._v(" "),n("li",[s._v("使用"),n("code",[s._v("sed")]),s._v("的每个脚本对该行进行操作")]),s._v(" "),n("li",[s._v("处理完成后输出该行")])]),s._v(" "),n("h2",{attrs:{id:"替换命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#替换命令","aria-hidden":"true"}},[s._v("#")]),s._v(" 替换命令")]),s._v(" "),n("p",[n("code",[s._v("sed")]),s._v("的替换命令是"),n("code",[s._v("s")]),s._v("。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'s/旧的内容/新的内容'")]),s._v(" 文件名称\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("blockquote",[n("p",[s._v("上面的"),n("code",[s._v("旧的内容")]),s._v("和"),n("code",[s._v("新的内容")]),s._v("是可以使用元字符的，为了防止元字符被解释成通配符，建议使用"),n("code",[s._v("'")]),s._v("。")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# cat afile")]),s._v("\na a a\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# sed 's/a/aa/' afile")]),s._v("\naa a a\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# cat afile")]),s._v("\na a a\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[n("code",[s._v("sed")]),s._v("命令中内容的分隔符是可以改变的，比如我们使用"),n("code",[s._v("!")]),s._v("作为分隔符。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# sed 's!/!abc!' afile")]),s._v("\na a a\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("如果需要进行多次替换操作，可以使用"),n("code",[s._v("-e")]),s._v("选项。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token function"}},[s._v("sed")]),s._v(" -e "),n("span",{attrs:{class:"token string"}},[s._v("'s/旧的内容/新的内容/'")]),s._v(" -e "),n("span",{attrs:{class:"token string"}},[s._v("'s/旧的内容/新的内容/'")]),s._v(" filename\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# sed -e 's/a/aa/' -e 's/aa/bb/' afile")]),s._v("\nbb a a\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("除了使用"),n("code",[s._v("-e")]),s._v("选项来指定多个命令，也可以不使用"),n("code",[s._v("-e")]),s._v("，使用"),n("code",[s._v(";")]),s._v("来分隔多个命令。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# sed 's/a/aa/;s/aa/bb/' afile")]),s._v("\nbb a a\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("如果需要将替换后的内容原样的写入到源文件中，需要使用"),n("code",[s._v("-i")]),s._v("选项")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),n("span",{attrs:{class:"token string"}},[s._v("'s/旧的内容/新的内容/'")]),s._v(" -e "),n("span",{attrs:{class:"token string"}},[s._v("'s/旧的内容/新的内容/'")]),s._v(" filename\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# sed -i 's/a/aa/;s/aa/bb/' afile")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# cat afile")]),s._v("\nbb a a\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("替换内容的时候也是可以使用"),n("code",[s._v("-r")]),s._v("选项的，使用正则表达式来匹配旧的内容。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token function"}},[s._v("sed")]),s._v(" -r "),n("span",{attrs:{class:"token string"}},[s._v("'s/扩展正则表达式/new/'")]),s._v(" filename\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# cat passwd")]),s._v("\nroot:x:0:0:root:/root:/bin/bash\nbin:x:1:1:bin:/bin:/sbin/nologin\ndaemon:x:2:2:daemon:/sbin:/sbin/nologin\nadm:x:3:4:adm:/var/adm:/sbin/nologin\nlp:x:4:7:lp:/var/spool/lpd:/sbin/nologin\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# sed 's/...//' passwd")]),s._v("\nt:x:0:0:root:/root:/bin/bash\n:x:1:1:bin:/bin:/sbin/nologin\nmon:x:2:2:daemon:/sbin:/sbin/nologin\n:x:3:4:adm:/var/adm:/sbin/nologin\nx:4:7:lp:/var/spool/lpd:/sbin/nologin\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# sed 's/s*bin//' passwd")]),s._v("\nroot:x:0:0:root:/root://bash\n:x:1:1:bin:/bin:/sbin/nologin\ndaemon:x:2:2:daemon:/:/sbin/nologin\nadm:x:3:4:adm:/var/adm://nologin\nlp:x:4:7:lp:/var/spool/lpd://nologin\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# grep root passwd")]),s._v("\nroot:x:0:0:root:/root:/bin/bash\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# grep root passwd | sed 's/^root//'")]),s._v("\n:x:0:0:root:/root:/bin/bash\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("不加"),n("code",[s._v("-r")]),s._v("选项我们也是可以直接使用正则表达式的普通元字符的，如果你想使用正则表达式的扩展元字符，需要使用"),n("code",[s._v("-r")]),s._v("选项")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# cat bfile")]),s._v("\nb\na\naa\naaa\nab\nabb\nabbb\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# sed 's/ab*/!/' bfile")]),s._v("\nb\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("a\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("aa\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# sed 's/ab+/!/' bfile")]),s._v("\nb\na\naa\naaa\nab\nabb\nabbb\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# sed -r 's/ab+/!/' bfile")]),s._v("\nb\na\naa\naaa\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# sed -r 's/ab?/!/' bfile")]),s._v("\nb\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("a\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("aa\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("b\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("bb\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# sed -r 's/a|b/!/' bfile")]),s._v("\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("a\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("aa\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("b\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("bb\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("bbb\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("在"),n("code",[s._v("sed")]),s._v("命令中可以使用"),n("code",[s._v("()")]),s._v("来引用分组")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# cat cfile")]),s._v("\naxyzb\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# sed -r 's/(a.*b)/\\1\\1/' cfile")]),s._v("\naxyzbaxyzb\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("blockquote",[n("p",[n("code",[s._v("\\1")]),s._v("获取第一个分组中的内容，"),n("code",[s._v("\\2")]),s._v("获取第二个分组中的内容。以此类推...")])]),s._v(" "),n("h3",{attrs:{id:"替换命令加强版"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#替换命令加强版","aria-hidden":"true"}},[s._v("#")]),s._v(" 替换命令加强版")]),s._v(" "),n("h4",{attrs:{id:"全局替换"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#全局替换","aria-hidden":"true"}},[s._v("#")]),s._v(" 全局替换")]),s._v(" "),n("p",[n("code",[s._v("sed")]),s._v("的全局替换需要指定"),n("code",[s._v("g")]),s._v("标识用来表示全局替换，用于替换所有出现的次数。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'s/旧的内容/新的内容/g'")]),s._v(" filename\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# head -5 passwd | sed 's/root/!!!!/'")]),s._v("\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v(":x:0:0:root:/root:/bin/bash\nbin:x:1:1:bin:/bin:/sbin/nologin\ndaemon:x:2:2:daemon:/sbin:/sbin/nologin\nadm:x:3:4:adm:/var/adm:/sbin/nologin\nlp:x:4:7:lp:/var/spool/lpd:/sbin/nologin\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# head -5 passwd | sed 's/root/!!!!/g'")]),s._v("\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v(":x:0:0:"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v(":/"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v(":/bin/bash\nbin:x:1:1:bin:/bin:/sbin/nologin\ndaemon:x:2:2:daemon:/sbin:/sbin/nologin\nadm:x:3:4:adm:/var/adm:/sbin/nologin\nlp:x:4:7:lp:/var/spool/lpd:/sbin/nologin\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("除了使用"),n("code",[s._v("g")]),s._v("来表示全局匹配，我们也可以明确的指定一个数字，用来表示匹配第几次出现的内容。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# head -5 passwd | sed 's/root/!!!!/2'")]),s._v("\nroot:x:0:0:"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v(":/root:/bin/bash\nbin:x:1:1:bin:/bin:/sbin/nologin\ndaemon:x:2:2:daemon:/sbin:/sbin/nologin\nadm:x:3:4:adm:/var/adm:/sbin/nologin\nlp:x:4:7:lp:/var/spool/lpd:/sbin/nologin\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h4",{attrs:{id:"标志位"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#标志位","aria-hidden":"true"}},[s._v("#")]),s._v(" 标志位")]),s._v(" "),n("p",[s._v("上面出现的"),n("code",[s._v("g")]),s._v("被称为标志位。"),n("code",[s._v("sed")]),s._v("命令可以使用标志位来加强替换命令。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'s/旧的内容/新的内容/标志位'")]),s._v(" filename\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("code",[s._v("sed")]),s._v("中主要有如下几个标志位：")]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("数字")]),s._v("：表示第几次出现才进行替换")]),s._v(" "),n("li",[n("strong",[s._v("g")]),s._v("：表示每次出现都进行替换")]),s._v(" "),n("li",[n("strong",[s._v("p")]),s._v("：打印模式空间的内容")]),s._v(" "),n("li",[n("strong",[s._v("w file")]),s._v("：将模式空间的内容写入到文件中")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# head -5 passwd | sed 's/root/!!!!/p'")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("# 下面输出两行的原因是，`sed`匹配一次后的输出，p模式输出")]),s._v("\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v(":x:0:0:root:/root:/bin/bash\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v(":x:0:0:root:/root:/bin/bash\nbin:x:1:1:bin:/bin:/sbin/nologin\ndaemon:x:2:2:daemon:/sbin:/sbin/nologin\nadm:x:3:4:adm:/var/adm:/sbin/nologin\nlp:x:4:7:lp:/var/spool/lpd:/sbin/nologin\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# ll wfile")]),s._v("\nls: 无法访问wfile: 没有那个文件或目录\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# head -5 passwd | sed 's/root/!!!!/w wfile'")]),s._v("\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v(":x:0:0:root:/root:/bin/bash\nbin:x:1:1:bin:/bin:/sbin/nologin\ndaemon:x:2:2:daemon:/sbin:/sbin/nologin\nadm:x:3:4:adm:/var/adm:/sbin/nologin\nlp:x:4:7:lp:/var/spool/lpd:/sbin/nologin\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# ll wfile")]),s._v("\n-rw-r--r-- 1 root root 32 1月  19 23:36 wfile\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# cat wfile")]),s._v("\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v(":x:0:0:root:/root:/bin/bash\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h4",{attrs:{id:"寻址"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#寻址","aria-hidden":"true"}},[s._v("#")]),s._v(" 寻址")]),s._v(" "),n("p",[n("code",[s._v("sed")]),s._v("命令默认会对每一行的内容进行操作，当我们增加了寻址后，只会对匹配的行进行操作。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'/正则表达式/s/旧的内容/新的内容/标志位'")]),s._v(" filename\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("上面就会只有匹配了前面的正则表达式的"),n("code",[s._v("行")]),s._v("才会被"),n("code",[s._v("sed")]),s._v("处理")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'行号/s/旧的内容/新的内容/标志位'")]),s._v(" filename\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("也可以明确指定行号，表示对哪一行的内容进行替换，也可以最后一行的"),n("code",[s._v("$")]),s._v("符号。")]),s._v(" "),n("p",[n("strong",[s._v("我们可以使用多个寻址符号，也可以混用行号和正则表达式寻址。")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# head -6 /etc/passwd | sed 's/adm/!/'")]),s._v("\nroot:x:0:0:root:/root:/bin/bash\nbin:x:1:1:bin:/bin:/sbin/nologin\ndaemon:x:2:2:daemon:/sbin:/sbin/nologin\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v(":x:3:4:adm:/var/adm:/sbin/nologin\nlp:x:4:7:lp:/var/spool/lpd:/sbin/nologin\nsync:x:5:0:sync:/sbin:/bin/sync\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# head -6 /etc/passwd | sed '1s/adm/!/'")]),s._v("\nroot:x:0:0:root:/root:/bin/bash\nbin:x:1:1:bin:/bin:/sbin/nologin\ndaemon:x:2:2:daemon:/sbin:/sbin/nologin\nadm:x:3:4:adm:/var/adm:/sbin/nologin\nlp:x:4:7:lp:/var/spool/lpd:/sbin/nologin\nsync:x:5:0:sync:/sbin:/bin/sync\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("p",[s._v("在第"),n("code",[s._v("1-3")]),s._v("行进行替换")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# head -6 /etc/passwd | sed '1,3s/adm/!/'")]),s._v("\nroot:x:0:0:root:/root:/bin/bash\nbin:x:1:1:bin:/bin:/sbin/nologin\ndaemon:x:2:2:daemon:/sbin:/sbin/nologin\nadm:x:3:4:adm:/var/adm:/sbin/nologin\nlp:x:4:7:lp:/var/spool/lpd:/sbin/nologin\nsync:x:5:0:sync:/sbin:/bin/sync\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# head -6 /etc/passwd | sed '/root/s/adm/!/'")]),s._v("\nroot:x:0:0:root:/root:/bin/bash\nbin:x:1:1:bin:/bin:/sbin/nologin\ndaemon:x:2:2:daemon:/sbin:/sbin/nologin\nadm:x:3:4:adm:/var/adm:/sbin/nologin\nlp:x:4:7:lp:/var/spool/lpd:/sbin/nologin\nsync:x:5:0:sync:/sbin:/bin/sync\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h4",{attrs:{id:"分组"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#分组","aria-hidden":"true"}},[s._v("#")]),s._v(" 分组")]),s._v(" "),n("p",[s._v("上面的寻址可以匹配多条命令")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("/regular/"),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("s/old/new/"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" s/old/new/"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h4",{attrs:{id:"sed脚本文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sed脚本文件","aria-hidden":"true"}},[s._v("#")]),s._v(" sed脚本文件")]),s._v(" "),n("p",[s._v("当我们的选项很长的时候，我们可以将选项保存为文件，然后使用"),n("code",[s._v("-f")]),s._v("选项来加载脚本文件。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token function"}},[s._v("sed")]),s._v(" -f sedscript filename\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# cat sedscript")]),s._v("\ns/root/"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("/\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# head -5 /etc/passwd | sed -f sedscript")]),s._v("\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v(":x:0:0:root:/root:/bin/bash\nbin:x:1:1:bin:/bin:/sbin/nologin\ndaemon:x:2:2:daemon:/sbin:/sbin/nologin\nadm:x:3:4:adm:/var/adm:/sbin/nologin\nlp:x:4:7:lp:/var/spool/lpd:/sbin/nologin\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"sed的其它指令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sed的其它指令","aria-hidden":"true"}},[s._v("#")]),s._v(" sed的其它指令")]),s._v(" "),n("p",[n("code",[s._v("sed")]),s._v("最常用的就是"),n("code",[s._v("s")]),s._v("即替换命令。除此之外，"),n("code",[s._v("sed")]),s._v("还支持其他的一些指令。")]),s._v(" "),n("h3",{attrs:{id:"删除指令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#删除指令","aria-hidden":"true"}},[s._v("#")]),s._v(" 删除指令")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("寻址"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("d\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("寻址可以是行号、正则表达式等。"),n("code",[s._v("d")]),s._v("这个指令用于删除模式空间内容，改变脚本的控制流，读取新的输入行。也就是说"),n("code",[s._v("d")]),s._v("指令后面的其它指令是不会被执行的。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# cat bfile")]),s._v("\nb\na\naa\naaa\nab\nabb\nabbb\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# sed '/ab/d' bfile")]),s._v("\nb\na\naa\naaa\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("blockquote",[n("p",[n("code",[s._v("d")]),s._v("指令会将匹配到寻址的行从模式空间中删除")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# sed '/ab/d;s/a/!/' bfile")]),s._v("\nb\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("a\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("aa\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h3",{attrs:{id:"追加、插入、更改"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#追加、插入、更改","aria-hidden":"true"}},[s._v("#")]),s._v(" 追加、插入、更改")]),s._v(" "),n("p",[s._v("追加指令是"),n("code",[s._v("a")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# sed '/ab/a hello' bfile")]),s._v("\nb\na\naa\naaa\nab\nhello\nabb\nhello\nabbb\nhello\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[n("code",[s._v("a")]),s._v("指令会在匹配到的行的下面插入指定内容。")]),s._v(" "),n("p",[s._v("插入指令是"),n("code",[s._v("i")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# sed '/ab/i hello' bfile")]),s._v("\nb\na\naa\naaa\nhello\nab\nhello\nabb\nhello\nabbb\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[n("code",[s._v("i")]),s._v("指令会在匹配到的行的上面插入指定内容")]),s._v(" "),n("p",[s._v("更改指令是"),n("code",[s._v("c")]),s._v("。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# sed '/ab/c hello' bfile")]),s._v("\nb\na\naa\naaa\nhello\nhello\nhello\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[n("code",[s._v("c")]),s._v("指令会在将匹配到的行替换成指定内容")]),s._v(" "),n("h3",{attrs:{id:"打印"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#打印","aria-hidden":"true"}},[s._v("#")]),s._v(" 打印")]),s._v(" "),n("p",[s._v("打印行号我们可以使用"),n("code",[s._v("=")]),s._v("指令")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# sed '/ab/=' bfile")]),s._v("\nb\na\naa\naaa\n5\nab\n6\nabb\n7\nabbb\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[s._v("打印命令是"),n("code",[s._v("p")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# sed '/ab/p' bfile")]),s._v("\nb\na\naa\naaa\nab\nab\nabb\nabb\nabbb\nabbb\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[n("code",[s._v("p")]),s._v("指令会将匹配的行重新打印一遍，通常和"),n("code",[s._v("-n")]),s._v("选项一起使用")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# sed -n '/ab/p' bfile")]),s._v("\nab\nabb\nabbb\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h3",{attrs:{id:"下一行"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#下一行","aria-hidden":"true"}},[s._v("#")]),s._v(" 下一行")]),s._v(" "),n("p",[s._v("下一行命令是"),n("code",[s._v("n")]),s._v("，这种情况适用于只想处理文件的奇数行或者只想处理文件的偶数行。")]),s._v(" "),n("h3",{attrs:{id:"读文件和写文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#读文件和写文件","aria-hidden":"true"}},[s._v("#")]),s._v(" 读文件和写文件")]),s._v(" "),n("p",[s._v("读文件的命令是"),n("code",[s._v("r")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# sed '/ab/r afile' bfile")]),s._v("\nb\na\naa\naaa\nab\nbb a a\nabb\nbb a a\nabbb\nbb a a\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[n("code",[s._v("r")]),s._v("指令可以将指定文件中的内容插入到匹配到的行的下面")]),s._v(" "),n("p",[s._v("写文件的命令是"),n("code",[s._v("w")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# sed '/ab/w dfile' bfile")]),s._v("\nb\na\naa\naaa\nab\nabb\nabbb\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# cat dfile")]),s._v("\nab\nabb\nabbb\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("p",[n("code",[s._v("w")]),s._v("指令可以将匹配到的行的内容写入到指定文件中")]),s._v(" "),n("h3",{attrs:{id:"退出命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#退出命令","aria-hidden":"true"}},[s._v("#")]),s._v(" 退出命令")]),s._v(" "),n("p",[s._v("退出命令是"),n("code",[s._v("q")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# sed '/ab/q' bfile")]),s._v("\nb\na\naa\naaa\nab\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("遇到一个匹配的行就直接退出了")]),s._v(" "),n("h2",{attrs:{id:"sed多行模式空间"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sed多行模式空间","aria-hidden":"true"}},[s._v("#")]),s._v(" sed多行模式空间")]),s._v(" "),n("p",[n("code",[s._v("sed")]),s._v("的多行模式处理命令是"),n("code",[s._v("N")]),s._v(", "),n("code",[s._v("D")]),s._v(", "),n("code",[s._v("P")]),s._v("。")]),s._v(" "),n("p",[s._v("多行模式一般用于处理配置文件，配置文件一般为单行出现，也有使用"),n("code",[s._v("XML")]),s._v("或"),n("code",[s._v("JSON")]),s._v("格式的配置文件，为多行出现。")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("N")]),s._v("将下一行加入到模式空间中")]),s._v(" "),n("li",[n("code",[s._v("D")]),s._v("删除模式空间中的第一个字符到第一个换行符")]),s._v(" "),n("li",[n("code",[s._v("P")]),s._v("打印模式空间中的第一个字符到第一个换行符")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# cat a.txt")]),s._v("\nhel\nlo\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# sed 'N' a.txt")]),s._v("\nhel\nlo\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# sed 'N;s/hello/!!!/' a.txt")]),s._v("\nhel\nlo\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# sed 'N;s/hel\\nlo/!!!/' a.txt")]),s._v("\n"),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# cat b.txt")]),s._v("\nhell\no "),n("span",{attrs:{class:"token function"}},[s._v("bash")]),s._v(" hel\nlo "),n("span",{attrs:{class:"token function"}},[s._v("bash")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# sed 'N;s/\\n//;s/hello bash/hello sed\\n/;P;D' b.txt")]),s._v("\nhello "),n("span",{attrs:{class:"token function"}},[s._v("sed")]),s._v("\n hello "),n("span",{attrs:{class:"token function"}},[s._v("sed")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h2",{attrs:{id:"保持空间"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#保持空间","aria-hidden":"true"}},[s._v("#")]),s._v(" 保持空间")]),s._v(" "),n("p",[n("code",[s._v("保持空间")]),s._v("也是多行的一种操作方式，将内容暂存在保持空间，便于做多行处理。")]),s._v(" "),n("p",[s._v("文本文件 -> 模式空间 -> 保持空间")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("h")]),s._v("和"),n("code",[s._v("H")]),s._v("将模式空间内容存放到保持空间中\n"),n("ul",[n("li",[n("code",[s._v("h")]),s._v("使用覆盖模式放到保存空间中")]),s._v(" "),n("li",[n("code",[s._v("H")]),s._v("使用追加模式将内容放到保存空间中")])])]),s._v(" "),n("li",[n("code",[s._v("g")]),s._v("和"),n("code",[s._v("G")]),s._v("将保持空间内容取出到模式空间\n"),n("ul",[n("li",[n("code",[s._v("g")]),s._v("使用覆盖模式放到模式空间中")]),s._v(" "),n("li",[n("code",[s._v("G")]),s._v("使用追加模式将内容放到模式空间中")])])]),s._v(" "),n("li",[n("code",[s._v("x")]),s._v("将模式空间和保持空间的内容进行对调")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token comment"}},[s._v("# cat -n /etc/passwd | head -6 | sed -n '1h;1!G;$!x;$p'")]),s._v("\n     6\tsync:x:5:0:sync:/sbin:/bin/sync\n     5\tlp:x:4:7:lp:/var/spool/lpd:/sbin/nologin\n     4\tadm:x:3:4:adm:/var/adm:/sbin/nologin\n     3\tdaemon:x:2:2:daemon:/sbin:/sbin/nologin\n     2\tbin:x:1:1:bin:/bin:/sbin/nologin\n     1\troot:x:0:0:root:/root:/bin/bash\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])])])}],!1,null,null,null);e.options.__file="36-sed介绍.md";a.default=e.exports}}]);