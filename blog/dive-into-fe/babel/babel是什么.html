<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Babel是什么 | 赛赛的空间</title>
    <meta name="description" content="赵赛赛个人博客，关注前端技术，后端技术，喜欢编程。每天进步一点点就好啦！">
    <link rel="icon" type="image/x-icon" href="/blog/favicon.ico">
  <script type="text/javascript" src="/blog/bdtj.js"></script>
    
    <link rel="preload" href="/blog/assets/css/0.styles.626dd732.css" as="style"><link rel="preload" href="/blog/assets/js/app.671cf827.js" as="script"><link rel="preload" href="/blog/assets/js/85.a1b62f34.js" as="script"><link rel="prefetch" href="/blog/assets/js/64.f6aacc6a.js"><link rel="prefetch" href="/blog/assets/js/2.285762ea.js"><link rel="prefetch" href="/blog/assets/js/3.020c5b73.js"><link rel="prefetch" href="/blog/assets/js/4.6daa2d0b.js"><link rel="prefetch" href="/blog/assets/js/5.f169fbdc.js"><link rel="prefetch" href="/blog/assets/js/6.8e18dc59.js"><link rel="prefetch" href="/blog/assets/js/7.90d2c0ad.js"><link rel="prefetch" href="/blog/assets/js/8.c79e2e52.js"><link rel="prefetch" href="/blog/assets/js/9.cbe6d4cd.js"><link rel="prefetch" href="/blog/assets/js/10.a3f3e621.js"><link rel="prefetch" href="/blog/assets/js/11.a936e569.js"><link rel="prefetch" href="/blog/assets/js/12.24ea46c0.js"><link rel="prefetch" href="/blog/assets/js/13.ca6cc387.js"><link rel="prefetch" href="/blog/assets/js/14.84cb7623.js"><link rel="prefetch" href="/blog/assets/js/15.21ca5469.js"><link rel="prefetch" href="/blog/assets/js/16.80a1f156.js"><link rel="prefetch" href="/blog/assets/js/17.d510fcbf.js"><link rel="prefetch" href="/blog/assets/js/18.0addd3df.js"><link rel="prefetch" href="/blog/assets/js/19.af3cd491.js"><link rel="prefetch" href="/blog/assets/js/20.2b570a83.js"><link rel="prefetch" href="/blog/assets/js/21.5632325c.js"><link rel="prefetch" href="/blog/assets/js/22.41f8f69f.js"><link rel="prefetch" href="/blog/assets/js/23.0cbb2dd3.js"><link rel="prefetch" href="/blog/assets/js/24.20915592.js"><link rel="prefetch" href="/blog/assets/js/25.3f717d25.js"><link rel="prefetch" href="/blog/assets/js/26.da439741.js"><link rel="prefetch" href="/blog/assets/js/27.ed820e7d.js"><link rel="prefetch" href="/blog/assets/js/28.4678c51e.js"><link rel="prefetch" href="/blog/assets/js/29.ac6d4ab9.js"><link rel="prefetch" href="/blog/assets/js/30.2b4d49d8.js"><link rel="prefetch" href="/blog/assets/js/31.844ba214.js"><link rel="prefetch" href="/blog/assets/js/32.76f67711.js"><link rel="prefetch" href="/blog/assets/js/33.759543b5.js"><link rel="prefetch" href="/blog/assets/js/34.565e062e.js"><link rel="prefetch" href="/blog/assets/js/35.9d0af171.js"><link rel="prefetch" href="/blog/assets/js/36.974734cb.js"><link rel="prefetch" href="/blog/assets/js/37.30fe7806.js"><link rel="prefetch" href="/blog/assets/js/38.f02db851.js"><link rel="prefetch" href="/blog/assets/js/39.e853f26a.js"><link rel="prefetch" href="/blog/assets/js/40.9fbc2d44.js"><link rel="prefetch" href="/blog/assets/js/41.f6a12994.js"><link rel="prefetch" href="/blog/assets/js/42.26bc959b.js"><link rel="prefetch" href="/blog/assets/js/43.f3269fdd.js"><link rel="prefetch" href="/blog/assets/js/44.cb5de5e9.js"><link rel="prefetch" href="/blog/assets/js/45.5d5f42a6.js"><link rel="prefetch" href="/blog/assets/js/46.c2493d97.js"><link rel="prefetch" href="/blog/assets/js/47.7242dd59.js"><link rel="prefetch" href="/blog/assets/js/48.aaecd468.js"><link rel="prefetch" href="/blog/assets/js/49.22c66b0e.js"><link rel="prefetch" href="/blog/assets/js/50.ec9a78ac.js"><link rel="prefetch" href="/blog/assets/js/51.08e6972d.js"><link rel="prefetch" href="/blog/assets/js/52.5335e403.js"><link rel="prefetch" href="/blog/assets/js/53.5a23b714.js"><link rel="prefetch" href="/blog/assets/js/54.da2bcf00.js"><link rel="prefetch" href="/blog/assets/js/55.744a3b3f.js"><link rel="prefetch" href="/blog/assets/js/56.7167b642.js"><link rel="prefetch" href="/blog/assets/js/57.53da1ce6.js"><link rel="prefetch" href="/blog/assets/js/58.f96b76b6.js"><link rel="prefetch" href="/blog/assets/js/59.b3f11627.js"><link rel="prefetch" href="/blog/assets/js/60.8718f455.js"><link rel="prefetch" href="/blog/assets/js/61.020b35e9.js"><link rel="prefetch" href="/blog/assets/js/62.7f38593d.js"><link rel="prefetch" href="/blog/assets/js/63.e74a255a.js"><link rel="prefetch" href="/blog/assets/js/65.579068ba.js"><link rel="prefetch" href="/blog/assets/js/66.56ae8286.js"><link rel="prefetch" href="/blog/assets/js/67.fb64ed3e.js"><link rel="prefetch" href="/blog/assets/js/68.c0ce6b62.js"><link rel="prefetch" href="/blog/assets/js/69.3c55a2e9.js"><link rel="prefetch" href="/blog/assets/js/70.1552c93b.js"><link rel="prefetch" href="/blog/assets/js/71.e2db2fee.js"><link rel="prefetch" href="/blog/assets/js/72.75390e0a.js"><link rel="prefetch" href="/blog/assets/js/73.d96dd626.js"><link rel="prefetch" href="/blog/assets/js/74.53f022cf.js"><link rel="prefetch" href="/blog/assets/js/75.991b2dc8.js"><link rel="prefetch" href="/blog/assets/js/76.5943780f.js"><link rel="prefetch" href="/blog/assets/js/77.3e6a07f1.js"><link rel="prefetch" href="/blog/assets/js/78.cd2433ad.js"><link rel="prefetch" href="/blog/assets/js/79.e936e0ea.js"><link rel="prefetch" href="/blog/assets/js/80.9c5f7171.js"><link rel="prefetch" href="/blog/assets/js/81.aeb8509b.js"><link rel="prefetch" href="/blog/assets/js/82.c4557bcf.js"><link rel="prefetch" href="/blog/assets/js/83.86ba0f80.js"><link rel="prefetch" href="/blog/assets/js/84.8682001c.js"><link rel="prefetch" href="/blog/assets/js/86.c5c1aace.js"><link rel="prefetch" href="/blog/assets/js/87.8ceeff21.js"><link rel="prefetch" href="/blog/assets/js/88.b4dbd7e6.js"><link rel="prefetch" href="/blog/assets/js/89.c132aab4.js"><link rel="prefetch" href="/blog/assets/js/90.913ecf1a.js"><link rel="prefetch" href="/blog/assets/js/91.748a8440.js"><link rel="prefetch" href="/blog/assets/js/92.b147545e.js"><link rel="prefetch" href="/blog/assets/js/93.736cd31d.js"><link rel="prefetch" href="/blog/assets/js/94.0bb7bf11.js"><link rel="prefetch" href="/blog/assets/js/95.9b07b3d9.js"><link rel="prefetch" href="/blog/assets/js/96.c69303f2.js"><link rel="prefetch" href="/blog/assets/js/97.f0b17868.js"><link rel="prefetch" href="/blog/assets/js/98.82cc9dbc.js"><link rel="prefetch" href="/blog/assets/js/99.0423b9a4.js"><link rel="prefetch" href="/blog/assets/js/100.bcfbb3a1.js"><link rel="prefetch" href="/blog/assets/js/101.dcaa0655.js"><link rel="prefetch" href="/blog/assets/js/102.88c36982.js"><link rel="prefetch" href="/blog/assets/js/103.3710c084.js"><link rel="prefetch" href="/blog/assets/js/104.6533a432.js"><link rel="prefetch" href="/blog/assets/js/105.a89481e0.js"><link rel="prefetch" href="/blog/assets/js/106.9b6ab26b.js"><link rel="prefetch" href="/blog/assets/js/107.69677771.js"><link rel="prefetch" href="/blog/assets/js/108.a2e9afe1.js"><link rel="prefetch" href="/blog/assets/js/109.9b82231a.js"><link rel="prefetch" href="/blog/assets/js/110.9de1e76f.js"><link rel="prefetch" href="/blog/assets/js/111.bf76559b.js"><link rel="prefetch" href="/blog/assets/js/112.01cbd7f6.js"><link rel="prefetch" href="/blog/assets/js/113.6f794126.js"><link rel="prefetch" href="/blog/assets/js/114.2d4be090.js"><link rel="prefetch" href="/blog/assets/js/115.fefca237.js"><link rel="prefetch" href="/blog/assets/js/116.3d16fc5d.js"><link rel="prefetch" href="/blog/assets/js/117.9d4833ed.js"><link rel="prefetch" href="/blog/assets/js/118.ef1a6afc.js"><link rel="prefetch" href="/blog/assets/js/119.add7f655.js"><link rel="prefetch" href="/blog/assets/js/120.5a504aa6.js"><link rel="prefetch" href="/blog/assets/js/121.135774b4.js"><link rel="prefetch" href="/blog/assets/js/122.6d6e15c3.js"><link rel="prefetch" href="/blog/assets/js/123.45a6c58a.js"><link rel="prefetch" href="/blog/assets/js/124.70e5e829.js"><link rel="prefetch" href="/blog/assets/js/125.834f755e.js"><link rel="prefetch" href="/blog/assets/js/126.25c00b92.js"><link rel="prefetch" href="/blog/assets/js/127.0d4b3aa3.js"><link rel="prefetch" href="/blog/assets/js/128.47ac9944.js"><link rel="prefetch" href="/blog/assets/js/129.28329aee.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.626dd732.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link"><img src="/blog/logo.png" alt="赛赛的空间" class="logo"> <span class="site-name can-hide">赛赛的空间</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">我的文章</a></div><div class="nav-item"><a href="/blog/dive-into-code.html" class="nav-link">前端攻坚战</a></div><div class="nav-item"><a href="/blog/good-writings.html" class="nav-link">阅读的好文</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">记录</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/linux.html" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/blog/translate.html" class="nav-link">翻译</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/zhaosaisai" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">我的文章</a></div><div class="nav-item"><a href="/blog/dive-into-code.html" class="nav-link">前端攻坚战</a></div><div class="nav-item"><a href="/blog/good-writings.html" class="nav-link">阅读的好文</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">记录</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/linux.html" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/blog/translate.html" class="nav-link">翻译</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/zhaosaisai" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <!----> </div> <div class="page"> <div class="content"><h1>Babel是什么</h1> <p></p><div class="table-of-contents"><ul><li><a href="#babel简介">Babel简介</a></li><li><a href="#babel使用">Babel使用</a><ul><li><a href="#配置文件">配置文件</a></li><li><a href="#以-node-js-的-package-使用">以Node.js的package使用</a></li><li><a href="#命令行">命令行</a></li></ul></li></ul></div><p></p> <h2 id="babel简介"><a href="#babel简介" aria-hidden="true" class="header-anchor">#</a> Babel简介</h2> <p><code>Babel</code>是一个<code>Javascript</code>编译器。<code>Babel</code>也是一个工具链，主要用于将新特性语法<code>Ecmascript2015+</code>版本的代码转换为向后兼容的<code>Javascript</code>语法，以便能够在低版本的浏览器或其它环境中运行。</p> <p><code>Babel</code>主要为我们做如下三件事情：</p> <ul><li><p>语法转换</p> <ul><li>将新特性语法转换为目标环境支持的语法</li></ul></li> <li><p>通过<code>Polyfill</code>的方式引入目标环境中缺少的特性</p> <ul><li>通过<code>@babel/polyfill</code>模块添加目标环境中缺少的特性。主要是一些高版本的<code>Ecmascript</code>提供的新特性<code>api</code></li></ul></li> <li><p>源码转换</p> <ul><li>通过插件对源码中的某些特性进行转换，源码转换是一个很泛的事情，不光能转换新的语法，你可以随心所欲的转换你任意想进行转换的东西。</li></ul></li></ul> <p>现在我们用一个简单的例子来看一下<code>babel</code>的语法转换。下面的例子我们在<code>map</code>的回调中使用了箭头函数，但箭头函数并不能在所有的浏览器中直接使用，所以我们需要借助<code>babel</code>将其转换为普通函数的形式。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.js</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>v <span class="token operator">=&gt;</span> v <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>然后在终端中运行<code>babel index.js --out-dir lib</code>，这个命令的含义就是使用<code>babel</code>编译<code>index.js</code>文件，并将编译后的文件保存在<code>lib</code>文件夹下面。然后你会发现编译后的文件如下</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// lib/index.js</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>v <span class="token operator">=&gt;</span> v <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>奇怪，编译后的文件和源文件并没有什么不同，难道是<code>babel</code>没起作用？不是的，这种情况是使用<code>babel</code>的时候首先需要注意的。**<code>babel</code>是构建在插件之上的，每一种语法的转换都是通过插件进行转换的。默认情况下，babel并不会编译文件，因为它不知道怎么去编译。如果你想编译特定的语法，你就需要明确的告诉<code>babel</code>。**那怎么告诉呢？插件--<code>babel</code>为新特性的语法都有提供对应的转换插件，当我们想转换这些语法的时候直接在配置中声明所使用到的插件就行了。这里我们想转换箭头函数，转换箭头函数的插件是<code>@babel/plugin-transform-arrow-functions</code>。所以，我们直接在<code>babel</code>的配置文件中指明就行了。</p> <blockquote><p>关于babel的配置文件我们后面会详细讲述</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// .babel.config.js</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;plugins&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;@babel/plugin-transform-arrow-functions&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>然后运行上面的编译命令，此时<code>lib/index.js</code>文件如下</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> v <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这就说明<code>babel</code>已经准确的将箭头函数编译成了普通函数的形式。</p> <h2 id="babel使用"><a href="#babel使用" aria-hidden="true" class="header-anchor">#</a> Babel使用</h2> <p><code>Babel</code>有三种基本的使用方式</p> <ul><li>通过配置文件的方式使用(常用，可以很方便的和其他工具集成)</li> <li>以<code>Node.js</code>的<code>package</code>使用</li> <li>命令行</li></ul> <p>下面我们同样以上面那个简单的例子来看一下这三种使用方式的一些基本步骤。</p> <h3 id="配置文件"><a href="#配置文件" aria-hidden="true" class="header-anchor">#</a> 配置文件</h3> <p>通过配置文件的方式使用<code>babel</code>是其最常用的使用方式，这种方式能很方便的和其它工具集成，比如<code>webpack</code>，<code>rollup</code>等。下面是一些基本步骤</p> <ul><li>安装所需的包</li></ul> <blockquote><p>这里面的包后面也会详细讲述</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> @babel/core @babel/preset-env @babel/cli
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>在项目的根目录下面创建一个名为<code>babel.config.js</code>的配置文件，内容如下</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  presets<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token string">&quot;targets&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token string">&quot;edge&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;17&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;firefox&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;60&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;chrome&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;67&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;safari&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;11.1&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;useBuiltIns&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;usage&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li>将<code>index.js</code>文件编译到<code>lib/index.js</code>文件中</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>babel index.js --out-dir lib
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="以node-js的package使用"><a href="#以node-js的package使用" aria-hidden="true" class="header-anchor">#</a> 以<code>Node.js</code>的<code>package</code>使用</h3> <p>我们在使用<code>babel</code>的时候，所需要的所有的<code>babel</code>模块都是作为独立的<code>npm</code>包发布的，这种模块化的设计能够让每种工具都针对特定使用情况进行设计。我们能够在我们的项目中直接将这些模块作为依赖集成到我们的开发流程中。</p> <ul><li>将<code>index.js</code>修改如下</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.js</span>
<span class="token keyword">const</span> babel <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;@babel/core&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> source <span class="token operator">=</span> <span class="token template-string"><span class="token string">`[1, 2, 3].map(v =&gt; v + 1);`</span></span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> code <span class="token punctuation">}</span> <span class="token operator">=</span> babel<span class="token punctuation">.</span><span class="token function">transform</span><span class="token punctuation">(</span>source<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  babelrc<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  presets<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> targets<span class="token punctuation">:</span> <span class="token string">'&gt; 1%'</span><span class="token punctuation">,</span> useBuiltIns<span class="token punctuation">:</span> <span class="token string">'usage'</span><span class="token punctuation">,</span> corejs<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li>在终端中执行<code>node index.js</code>，会得到如下输出</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> v <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="命令行"><a href="#命令行" aria-hidden="true" class="header-anchor">#</a> 命令行</h3> <p><code>babel</code>提供了两个命令行：<code>@babel/cli</code>和<code>@babel/node</code>。</p> <ul><li><code>@babel/cli</code>适合安装在项目中并在<code>script</code>脚本中直接使用<code>babel</code>命令编译文件。</li> <li><code>@babel/node</code>适合全局安装。可以直接通过<code>babel-node</code>命令编译文件。</li></ul> <p>我们重点关注下<code>@babel/cli</code>的使用，<code>@babel/cli</code>有很多选项，可以通过<code>--help</code>命令来查看命令行工具所支持的参数列表。我们最常用的莫过于<code>--plugins</code>和<code>--presets</code>选项，分别用来设置插件和预设。</p> <p>比如，我们编译<code>index.js</code>文件可以直接在命令行中运行如下命令</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>./node_modules/.bin/babel index.js --out-dir lib --presets <span class="token string">'@babel/preset-env'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>或者</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>npx babel index.js --out-dir lib --presets <span class="token string">'@babel/preset-env'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p><code>@babel/cli</code>并不是很常用，大家了解即可</p></blockquote> <p>上面就是<code>babel</code>使用的基本方式，下面我们学习下<code>babel</code>两个非常重要的概念<code>插件</code>和<code>预设</code>。</p></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/blog/assets/js/85.a1b62f34.js" defer></script><script src="/blog/assets/js/app.671cf827.js" defer></script>
  </body>
</html>
