(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{222:function(s,t,a){"use strict";a.r(t);var n=a(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"content"},[a("h1",[s._v("babel的那些模块")]),s._v(" "),a("p",[a("code",[s._v("babel")]),s._v("的编译过程大致上可以分为三个步骤："),a("strong",[s._v("解析")]),s._v(" -> "),a("strong",[s._v("转换")]),s._v(" -> "),a("strong",[s._v("生成")]),s._v("。每个步骤"),a("code",[s._v("babel")]),s._v("都提供相应的模块进行处理。")]),s._v(" "),a("ul",[a("li",[s._v("解析过程主要由"),a("code",[s._v("@babel/core")]),s._v("处理")]),s._v(" "),a("li",[s._v("转换过程主要由"),a("code",[s._v("@babel/transform")]),s._v("处理")]),s._v(" "),a("li",[s._v("生成过程主要由"),a("code",[s._v("@babel/generate")]),s._v("处理")])]),s._v(" "),a("p",[s._v("每个过程也会有相应的插件辅助上面这些模块。这些前面已经叙述，这里我们主要看一下上面这几个模块的一些核心功能。")]),s._v(" "),a("h2",{attrs:{id:"babel-core"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel-core","aria-hidden":"true"}},[s._v("#")]),s._v(" @babel/core")]),s._v(" "),a("p",[s._v("首先安装这个模块")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("install")]),s._v(" @babel/core\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("code",[s._v("@babel/core")]),s._v("是"),a("code",[s._v("babel")]),s._v("的核心模块，"),a("code",[s._v("babel")]),s._v("很多功能都基于这个模块实现。当然，你也可以在自己的项目中引入这个模块，然后对代码进行解析和转换。")]),s._v(" "),a("p",[s._v("这个模块提供了四种功能的"),a("code",[s._v("api")]),s._v("，每种功能都有三种风格。比如"),a("code",[s._v("transform")]),s._v("，"),a("code",[s._v("transformSync")]),s._v("，"),a("code",[s._v("transformAsync")]),s._v("都是用来将源码转换成"),a("code",[s._v("ast")]),s._v("的，但是三种"),a("code",[s._v("api")]),s._v("的风格对应的分别是"),a("code",[s._v("异步回调风格")]),s._v("，"),a("code",[s._v("同步风格")]),s._v("以及"),a("code",[s._v("Promise风格")]),s._v("。")]),s._v(" "),a("p",[s._v("我们就以上面的这个"),a("code",[s._v("api")]),s._v("为例，看看这三种风格的"),a("code",[s._v("api")]),s._v("是怎么使用的。")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" babel "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("require")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token string"}},[s._v("'@babel/core'")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" sourceCode "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v("'[1, 2, 3].map(v => v + 1)'")]),s._v("\n\n"),a("span",{attrs:{class:"token comment"}},[s._v("// 异步回调函数风格")]),s._v("\nbabel"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{attrs:{class:"token function"}},[s._v("transform")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sourceCode"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" ast"),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("true")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" result"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" code"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" map"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ast "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" result\n"),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{attrs:{class:"token comment"}},[s._v("// 同步风格")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" code"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" map"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ast "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" babel"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{attrs:{class:"token function"}},[s._v("transformSync")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sourceCode"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" ast"),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("true")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{attrs:{class:"token comment"}},[s._v("// promise风格")]),s._v("\nbabel"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{attrs:{class:"token function"}},[s._v("transformAsync")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sourceCode"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{attrs:{class:"token function"}},[s._v("then")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("result "),a("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" code"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" map"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ast "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" result\n"),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("p",[s._v("除了"),a("code",[s._v("transform")]),s._v("等接口外，这个模块还对外暴露了下面几个"),a("code",[s._v("api")]),s._v("，同样每种"),a("code",[s._v("api")]),s._v("都有三种不同的风格。")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("transformFile(Sync|Async)")]),s._v("：转换文件的内容为"),a("code",[s._v("ast")])]),s._v(" "),a("li",[a("strong",[s._v("transformFromAst(Sync|Async)")]),s._v("：直接从"),a("code",[s._v("ast")]),s._v("进行转换")]),s._v(" "),a("li",[a("strong",[s._v("parse(Sync|Async)")]),s._v("：将代码解析成"),a("code",[s._v("ast")]),s._v("，不会进行转换。")])]),s._v(" "),a("h2",{attrs:{id:"babel-traverse"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel-traverse","aria-hidden":"true"}},[s._v("#")]),s._v(" @babel/traverse")]),s._v(" "),a("p",[a("code",[s._v("babel")]),s._v("编译的第二个阶段就是转换，转换其实就是将源代码的"),a("code",[s._v("ast")]),s._v("转换为目标代码的"),a("code",[s._v("ast")]),s._v("。这个过程会使用很多的转换插件，但核心还是依赖于"),a("code",[s._v("@babel/traverse")]),s._v("。这个模块的使用也很简单，下面是官网的一个例子")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("as")]),s._v(" parser "),a("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"@babel/parser"')]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" traverse "),a("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"@babel/traverse"')]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" code "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[s._v("`function square(n) {\n  return n * n;\n}`")])]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" ast "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" parser"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{attrs:{class:"token function"}},[s._v("parse")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("code"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{attrs:{class:"token function"}},[s._v("traverse")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ast"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{attrs:{class:"token function"}},[s._v("enter")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("path"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("path"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{attrs:{class:"token function"}},[s._v("isIdentifier")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" name"),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"n"')]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      path"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("node"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"x"')]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("p",[a("code",[s._v("traverse")]),s._v("接收两个参数，第一个参数就是"),a("code",[s._v("ast")]),s._v("，第二个参数就是一个"),a("code",[s._v("visitor")]),s._v("对象，所谓的"),a("code",[s._v("visitor")]),s._v("对象就是由一系列"),a("code",[s._v("ast")]),s._v("节点类型方法所组成的对象，当然，也会包含"),a("code",[s._v("enter")]),s._v("或者"),a("code",[s._v("exit")]),s._v("等类似于钩子的方法。")]),s._v(" "),a("p",[s._v("比如下面这个例子，同样来自于官网")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token function"}},[s._v("traverse")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ast"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    FunctionDeclaration"),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("function")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("path"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n             path"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("node"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"x"')]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("当"),a("code",[s._v("traverse")]),s._v("遍历"),a("code",[s._v("ast")]),s._v("的过程中发现了函数声明的语法，则在转换的过程中就会调用我们传入的"),a("code",[s._v("visitor")]),s._v("对象的"),a("code",[s._v("FunctionDeclaration")]),s._v("方法。")]),s._v(" "),a("h2",{attrs:{id:"babel-generator"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel-generator","aria-hidden":"true"}},[s._v("#")]),s._v(" @babel/generator")]),s._v(" "),a("p",[a("code",[s._v("babel")]),s._v("的第三阶段就是根据新的"),a("code",[s._v("ast")]),s._v("生成代码的过程。生成代码主要依赖于"),a("code",[s._v("@babel/generator")]),s._v("这个模块。")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" babel "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("require")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token string"}},[s._v("'@babel/core'")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" generate "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("require")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token string"}},[s._v("'@babel/generator'")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{attrs:{class:"token keyword"}},[s._v("default")]),s._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" sourceCode "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v("'[1, 2, 3].map(v => v + 1)'")]),s._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" ast "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" babel"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{attrs:{class:"token function"}},[s._v("transformSync")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sourceCode"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" ast"),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("true")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" output "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("generate")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ast"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nconsole"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{attrs:{class:"token function"}},[s._v("log")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("output"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("code"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h2",{attrs:{id:"babel-parser"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel-parser","aria-hidden":"true"}},[s._v("#")]),s._v(" @babel/parser")]),s._v(" "),a("p",[a("code",[s._v("@babel/parser")]),s._v("是"),a("code",[s._v("babel")]),s._v("官方提供的一个语法解析模块。有以下特性")]),s._v(" "),a("ul",[a("li",[s._v("支持最新的"),a("code",[s._v("ECMAScript")]),s._v("版本的语法，默认是"),a("code",[s._v("ES2017")])]),s._v(" "),a("li",[s._v("注释操作")]),s._v(" "),a("li",[s._v("支持"),a("code",[s._v("JSX")]),s._v(", "),a("code",[s._v("Flow")]),s._v("和"),a("code",[s._v("Typescript")])]),s._v(" "),a("li",[s._v("支持处于提案阶段的语法")])]),s._v(" "),a("p",[s._v("这个模块的使用也很简单，直接使用其提供的"),a("code",[s._v("parse")]),s._v("方法就可以对代码进行编译了，返回的结果就是编译后的"),a("code",[s._v("ast")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" parse "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("require")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token string"}},[s._v("'@babel/parser'")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" sourceCode "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v("'[1, 2, 3].map(v => v + 1)'")]),s._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" ast "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("parse")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sourceCode"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{attrs:{class:"token comment"}},[s._v("/* parser options */")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nconsole"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{attrs:{class:"token function"}},[s._v("log")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ast"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("blockquote",[a("p",[s._v("解析的选项比较简单，直接看文档即可 https://www.babeljs.cn/docs/babel-parser#options")])])])}],!1,null,null,null);e.options.__file="babel的那些模块.md";t.default=e.exports}}]);