(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{202:function(s,t,n){"use strict";n.r(t);var a=n(0),e=Object(a.a)({},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"content"},[n("h1",[s._v("redux源码阅读－－主模块")]),s._v(" "),s._m(0),s._v(" "),s._m(1),s._v(" "),n("p",[s._v("下面是模块的源码(只包含自己对代码的理解，并不包含原注释。)")]),s._v(" "),s._m(2),s._m(3),s._v(" "),s._m(4),s._m(5),s._v(" "),s._m(6),s._v(" "),s._m(7),s._v(" "),n("p",[s._v("可以通过下面两种方式设置：")]),s._v(" "),s._m(8),s._m(9),s._v(" "),n("p",[s._v("可以通过下面这种方式指定：")]),s._v(" "),s._m(10),n("p",[s._v("这就是对redux源码主模块的一个整体解读，水平有限，欢迎拍砖。后续的源码解读和测试例子可以关注："),n("a",{attrs:{href:"https://github.com/SourceCooode/__redux",target:"_blank",rel:"noopener noreferrer"}},[s._v("redux源码解读仓库"),n("OutboundLink")],1)])])},[function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("code",[this._v("redux")]),this._v("的入口模块就是"),t("code",[this._v("src/index.js")]),this._v("。这个文件的代码十分简单。主要就做两件事：")])},function(){var s=this.$createElement,t=this._self._c||s;return t("ul",[t("li",[this._v("引入个功能模块，并挂载至同一个对象上，对外暴露。")]),this._v(" "),t("li",[this._v("在非"),t("code",[this._v("production")]),this._v("环境下压缩代码，给予警告。")])])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("// 引入createStore模块，这个模块就是`createStore`方法的实现")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" createStore "),n("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'./createStore'")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 引入combineReducers模块，这个模块就是`combineReducers`方法的实现")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" combineReducers "),n("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'./combineReducers'")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 引入bindActionCreators模块，这个模块就是`bindActionCreators`方法的实现")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" bindActionCreators "),n("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'./bindActionCreators'")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 引入applyMiddleware模块，这个模块就是`applyMiddleware`方法的实现")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" applyMiddleware "),n("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'./applyMiddleware'")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 引入compose模块，这个模块就是`compose`方法的实现")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" compose "),n("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'./compose'")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// warning在支持console对象的浏览器中可以看作是对console.error方法的一个便捷方法，否则就是一个Error的实例对象。")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("import")]),s._v(" warning "),n("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'./utils/warning'")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 这个函数唯一的作用就是：判断代码是不是处于压缩模式下，如果代码处于压缩模式下，函数的名称会改变，即")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// isCrushed.name === 'isCrushed' 为false")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("isCrushed")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 如果在非production模式下压缩我们的js代码，会抛出warning。")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// if的判断条件其实就是告诉我们，在production的模式下，一定要设置process.env.NODE_ENV为production")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  process"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token constant"}},[s._v("NODE_ENV")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("!==")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'production'")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("&&")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" isCrushed"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),n("span",{attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'string'")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("&&")]),s._v("\n  isCrushed"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),n("span",{attrs:{class:"token operator"}},[s._v("!==")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'isCrushed'")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{attrs:{class:"token function"}},[s._v("warning")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),n("span",{attrs:{class:"token string"}},[s._v("'You are currently using minified code outside of NODE_ENV === \\'production\\'. '")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v("\n    "),n("span",{attrs:{class:"token string"}},[s._v("'This means that you are running a slower development build of Redux. '")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v("\n    "),n("span",{attrs:{class:"token string"}},[s._v("'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify '")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v("\n    "),n("span",{attrs:{class:"token string"}},[s._v("'or DefinePlugin for webpack (http://stackoverflow.com/questions/30030031) '")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("+")]),s._v("\n    "),n("span",{attrs:{class:"token string"}},[s._v("'to ensure you have the correct code for your production build.'")]),s._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 这就是我们通常使用的redux的几个常用的方法")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  createStore"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  combineReducers"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  bindActionCreators"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  applyMiddleware"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  compose\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("怎么设置环境变量"),t("code",[this._v("NODE_ENV")]),this._v("的值呢？对于我们使用"),t("code",[this._v("webpack")]),this._v("进行开发的同学来说，我们可以通过如下方式设置。")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("plugins"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("webpack"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("DefinePlugin")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{attrs:{class:"token string"}},[s._v("'process.env'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{attrs:{class:"token constant"}},[s._v("NODE_ENV")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token constant"}},[s._v("JSON")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("stringify")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("process"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token constant"}},[s._v("NODE_ENV")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("其中，"),t("code",[this._v("JSON.stringify(process.env.NODE_ENV)")]),this._v("是直接获取的我们"),t("code",[this._v("bash")]),this._v("终端而言的。所以，在运行我们的项目之前，我们必须确保制定了这个环境变量(注："),t("code",[this._v("NODE_ENV")]),this._v("并不是不可变的，你也可以指定其他的名字，但是需要和自己项目中的获取保持一致)")])},function(){var s=this.$createElement,t=this._self._c||s;return t("blockquote",[t("p",[this._v("假设我们项目的启动脚本是"),t("code",[this._v("yarn run start")])])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("strong",[this._v("Mac or Linux")])])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token function"}},[s._v("export")]),s._v(" NODE_ENV"),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("production\nyarn run start\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("# 或者")]),s._v("\n\nNODE_ENV"),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("production yarn run start\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("strong",[this._v("Windows")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[this._v("set")]),this._v(" NODE_ENV"),t("span",{attrs:{class:"token operator"}},[this._v("=")]),this._v("production yarn run start\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])}],!1,null,null,null);e.options.__file="redux源码阅读－－主模块.md";t.default=e.exports}}]);