(window.webpackJsonp=window.webpackJsonp||[]).push([[112],{178:function(s,a,t){"use strict";t.r(a);var e=t(0),v=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("div",{staticClass:"content"},[t("h1",[s._v("进程管理")]),s._v(" "),t("h2",{attrs:{id:"进程概念和进程查看"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进程概念和进程查看","aria-hidden":"true"}},[s._v("#")]),s._v(" 进程概念和进程查看")]),s._v(" "),t("p",[t("code",[s._v("进程")]),s._v("就是指运行中的程序，从程序开始运行到终止的整个生命周期都是可管理的。"),t("code",[s._v("C")]),s._v("程序的启动是从"),t("code",[s._v("main")]),s._v("函数开始的。")]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("main")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token keyword"}},[s._v("int")]),s._v(" agrc"),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("char")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v("argv"),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("终止进程的方式不唯一，主要分为"),t("strong",[s._v("正常终止")]),s._v("和"),t("strong",[s._v("异常终止")]),s._v("。")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("正常终止")]),s._v("也分为从main中返回，调用exit等方式。")]),s._v(" "),t("li",[t("strong",[s._v("异常终止")]),s._v("分为调用abort，接收信号等。")])]),s._v(" "),t("h2",{attrs:{id:"进程的控制命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进程的控制命令","aria-hidden":"true"}},[s._v("#")]),s._v(" 进程的控制命令")]),s._v(" "),t("h3",{attrs:{id:"查看进程的命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看进程的命令","aria-hidden":"true"}},[s._v("#")]),s._v(" 查看进程的命令")]),s._v(" "),t("h4",{attrs:{id:"ps"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ps","aria-hidden":"true"}},[s._v("#")]),s._v(" ps")]),s._v(" "),t("p",[s._v("这个命令主要用于查看当前终端能够查看到的进程状态。")]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/lsz/process1.png",alt:""}})]),s._v(" "),t("p",[s._v("其中"),t("code",[s._v("PID")]),s._v("就是进程id，通过进程id可以定位到某个进程。"),t("code",[s._v("TTY")]),s._v("执行进程的终端，"),t("code",[s._v("pts/0")]),s._v("是指虚拟终端。"),t("code",[s._v("CMD")]),s._v("就是运行当前进程的命令。")]),s._v(" "),t("p",[t("strong",[s._v("-e")]),s._v("选项可以用来查看其它终端运行的进程，也就是查看当前系统中运行的进程。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token function"}},[s._v("ps")]),s._v(" -e\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"/blog/lsz/process2.png",alt:""}})]),s._v(" "),t("p",[t("code",[s._v("ps -ef")]),s._v("可以显示更多的信息，包括"),t("code",[s._v("UID")]),s._v("，"),t("code",[s._v("PPID")]),s._v("，"),t("code",[s._v("CMD")]),s._v("也会将命令的完整路径显示出来。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"/blog/lsz/process3.png",alt:""}})]),s._v(" "),t("blockquote",[t("p",[s._v("这里的"),t("code",[s._v("UID")]),s._v("是指有效用户id，不是指启动用户id。")])]),s._v(" "),t("p",[t("code",[s._v("-l")]),s._v("选项可以将进程中的线程信息也打印出来。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token function"}},[s._v("ps")]),s._v(" -efl\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"/blog/lsz/process4.png",alt:""}})]),s._v(" "),t("h4",{attrs:{id:"pstree"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pstree","aria-hidden":"true"}},[s._v("#")]),s._v(" pstree")]),s._v(" "),t("p",[s._v("这个命令主要是将进程信息通过树状的结构显示出来。")]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/lsz/process5.png",alt:""}})]),s._v(" "),t("h4",{attrs:{id:"top"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#top","aria-hidden":"true"}},[s._v("#")]),s._v(" top")]),s._v(" "),t("p",[s._v("这个命令可以用来查看当前进程的运行状态。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token function"}},[s._v("top")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"/blog/lsz/process6.png",alt:""}})]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/lsz/process7.png",alt:""}})]),s._v(" "),t("p",[t("code",[s._v("up 20 days, 21:38")]),s._v("指当前系统从最后一次开机经过了多长时间了。这里表示当前系统已经开机20天21小时38分钟了。")]),s._v(" "),t("p",[t("code",[s._v("1 user")]),s._v("表示当前系统有多少个用户登录过了。这里的值表示只有1个用户登录过此系统。")]),s._v(" "),t("p",[t("code",[s._v("load average: 0.00, 0.01, 0.05")]),s._v("这里表示系统的平均负载，主要是用来衡量系统的繁忙程度的。这里的三个值分别是"),t("code",[s._v("1min 5min 15min")]),s._v("。如果值达到"),t("code",[s._v("1")]),s._v("的话，表示系统处于满负载的状态。")]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/lsz/process8.png",alt:""}})]),s._v(" "),t("p",[s._v("对于操作系统而言，每一个进程就是一个任务。这一行表示当前系统有多少任务(进程)在运行。")]),s._v(" "),t("p",[t("code",[s._v("Tasks: 87 total, 1 running, 86 sleeping, 0 stopped, 0 zombie")]),s._v("表示当前系统总共有"),t("code",[s._v("87")]),s._v("个任务，其中"),t("code",[s._v("1")]),s._v("个在运行，"),t("code",[s._v("86")]),s._v("处于休眠状态。")]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/lsz/process9.png",alt:""}})]),s._v(" "),t("p",[s._v("这一行主要用于显示当前系统"),t("code",[s._v("CPU")]),s._v("的使用比例。")]),s._v(" "),t("p",[t("code",[s._v("0.3 us")]),s._v("表示有"),t("code",[s._v("0.3%")]),s._v("用于用户状态的计算。（如果当前cpu处于大量的计算的时候，这个值会高）\n"),t("code",[s._v("0.5 sy")]),s._v("表示有"),t("code",[s._v("0.5%")]),s._v("用于进程之间状态交互的计算。\n"),t("code",[s._v("98.7 id")]),s._v("表示有"),t("code",[s._v("98.7%")]),s._v("系统的空闲状态。\n"),t("code",[s._v("0.0 wa")]),s._v("表示IO等待(wait)状态。")]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/lsz/process10.png",alt:""}})]),s._v(" "),t("p",[s._v("这一行表示的是当前系统的内存状态。"),t("code",[s._v("4045108 total")]),s._v("表示一共有多少内存，"),t("code",[s._v("2675532 free")]),s._v("处于空闲状态，"),t("code",[s._v("146444 used")]),s._v("已经使用了多少内存，"),t("code",[s._v("1223212 buff/cache")]),s._v("多少内存用于读写和缓存。")]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/lsz/process11.png",alt:""}})]),s._v(" "),t("p",[s._v("这行记录表示交换区内存，也指虚拟内存。当真实内存不够的时候，可以把虚拟内存交换出来，用于真实内存。")]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/lsz/process12.png",alt:""}})]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("top")]),s._v("命令默认每"),t("code",[s._v("3s")]),s._v("更新一下数据。可以按"),t("code",[s._v("s")]),s._v("键更改数据更新的时间。")])]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/lsz/process13.png",alt:""}})]),s._v(" "),t("p",[t("code",[s._v("top -p pid")]),s._v("可以用来只查看某个进程的运行状态。")]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/lsz/process14.png",alt:""}})]),s._v(" "),t("ul",[t("li",[s._v("进程也是树形结构")]),s._v(" "),t("li",[s._v("进程和权限是密不可分的")])]),s._v(" "),t("h3",{attrs:{id:"进程的控制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进程的控制","aria-hidden":"true"}},[s._v("#")]),s._v(" 进程的控制")]),s._v(" "),t("p",[s._v("进程的控制最简单的就是对进程的优先级进行一个调整。从上面的"),t("code",[s._v("top")]),s._v("命令可以看出，每一个进程都会占据系统的资源。进程的优先级调整其实就是对某个进程占用资源的控制，可以让某个进程不要占用太多的资源，也可以让某个占据较少资源的进程能够分配更多的资源。")]),s._v(" "),t("p",[s._v("优先级的调整我们可以使用"),t("code",[s._v("nice")]),s._v("和"),t("code",[s._v("renice")]),s._v("命令。")]),s._v(" "),t("h4",{attrs:{id:"nice"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nice","aria-hidden":"true"}},[s._v("#")]),s._v(" nice")]),s._v(" "),t("p",[s._v("这个命令可以设置的范围是"),t("code",[s._v("-20 --- 19")]),s._v("，值越小优先级越高，抢占资源就越多。")]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/lsz/process15.png",alt:""}})]),s._v(" "),t("p",[s._v("上面使用"),t("code",[s._v("top")]),s._v("显示出来的结果，其中"),t("code",[s._v("PR")]),s._v("就可以理解为是一个系统的优先级，"),t("code",[s._v("NI")]),s._v("就是当前进程的"),t("code",[s._v("nice")]),s._v("值。"),t("code",[s._v("0")]),s._v("是进程默认的启动级别。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("# 表示在启动进程的时候设置其nice值。10表示优先级很低，该进程在执行的时候不会占用太多的系统资源")]),s._v("\n"),t("span",{attrs:{class:"token function"}},[s._v("nice")]),s._v(" -n 10 ./a.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:"/blog/lsz/process16.png",alt:""}})]),s._v(" "),t("h4",{attrs:{id:"renice"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#renice","aria-hidden":"true"}},[s._v("#")]),s._v(" renice")]),s._v(" "),t("p",[s._v("这个命令主要是重新设置优先级。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("# 15069是进程的id，这个命令可以对正在运行的进程设置其nice值")]),s._v("\n"),t("span",{attrs:{class:"token function"}},[s._v("renice")]),s._v(" -n 15 15069\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:"/blog/lsz/process17.png",alt:""}})]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/lsz/process18.png",alt:""}})]),s._v(" "),t("h4",{attrs:{id:"作业控制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#作业控制","aria-hidden":"true"}},[s._v("#")]),s._v(" 作业控制")]),s._v(" "),t("p",[s._v("作业控制主要是用来控制进程的前台和后台作业的切换。")]),s._v(" "),t("p",[s._v("我们可以在执行命令的时候，在末尾添加一个"),t("code",[s._v("&")]),s._v("符号。这个符号会将当前命令在后台进行执行。")]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/lsz/process19.png",alt:""}})]),s._v(" "),t("p",[s._v("可以使用"),t("code",[s._v("jobs")]),s._v("命令显示所有运行在后台的命令，然后使用"),t("code",[s._v("fg")]),s._v("命令将其设置到前台。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{attrs:{class:"token comment"}},[s._v("# jobs")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("1"),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("+  运行中               ./a.sh "),t("span",{attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila ~"),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{attrs:{class:"token comment"}},[s._v("# fg 1")]),s._v("\n./a.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[t("img",{attrs:{src:"/blog/lsz/process20.png",alt:""}})]),s._v(" "),t("p",[s._v("我们也可以直接使用"),t("code",[s._v("ctrl+z")]),s._v("命令将运行在前台的命令放到后台中执行。这个快捷键会暂停当前进程并保存到内存中。")]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/lsz/process21.png",alt:""}})]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/lsz/process22.png",alt:""}})]),s._v(" "),t("blockquote",[t("p",[s._v("真正将命令放置到后台启动的命令是"),t("code",[s._v("bg")])])]),s._v(" "),t("h2",{attrs:{id:"进程的通信方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进程的通信方式","aria-hidden":"true"}},[s._v("#")]),s._v(" 进程的通信方式")]),s._v(" "),t("p",[t("code",[s._v("信号")]),s._v("是进程间通信方式之一，典型的用法就是：终端用户输入中断命令，通过信号机制停止一个程序的运行。")]),s._v(" "),t("h3",{attrs:{id:"信号"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#信号","aria-hidden":"true"}},[s._v("#")]),s._v(" 信号")]),s._v(" "),t("p",[s._v("使用信号的方式有很多，最常见的就是"),t("code",[s._v("ctrl + c")]),s._v("用来通知前台进程组终止进程(SIGINT)。")]),s._v(" "),t("p",[s._v("也可以使用"),t("code",[s._v("kill")]),s._v("命令发出信号。其中"),t("code",[s._v("kill -9 pid")]),s._v("发出"),t("code",[s._v("SIGKILL")]),s._v("信号，用来立即结束程序，不能被阻塞和处理。")]),s._v(" "),t("p",[s._v("使用"),t("code",[s._v("kill -l")]),s._v("可以查看所有支持的信号列表")]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/lsz/kill1.png",alt:""}})]),s._v(" "),t("p",[s._v("发送进程的格式就如下")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token function"}},[s._v("kill")]),s._v(" -9 15068\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"守护进程和系统日志"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#守护进程和系统日志","aria-hidden":"true"}},[s._v("#")]),s._v(" 守护进程和系统日志")]),s._v(" "),t("p",[t("code",[s._v("守护进程")]),s._v("就是在系统启动的时候就运行，而不是用户在终端中手动启动进程。")]),s._v(" "),t("p",[s._v("守护进程和一般进程的区别：守护进程不需要终端就能够将进程启动，进程启动时候的输出会直接打印到一些特殊的文件中，进程所占用的目录就在用户的根目录。")]),s._v(" "),t("blockquote",[t("p",[s._v("使用"),t("code",[s._v("nohup")]),s._v("命令启动进程，使用"),t("code",[s._v("nohup")]),s._v("命令启动的进程会忽略"),t("code",[s._v("hangup(挂起)")]),s._v("的信号。正常情况下，关闭终端会结束当前终端中正在运行的进程，如果我们的进程是通过"),t("code",[s._v("nohup")]),s._v("命令启动，关闭终端，并不会结束这个进程。")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token function"}},[s._v("nohup")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("tail")]),s._v(" -f /var/log/messages \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("code",[s._v("nohup")]),s._v("经常和"),t("code",[s._v("&")]),s._v("配合使用，这样就会创建一个一直在后台运行的命令。即使关闭终端，也不会结束这个进程。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token function"}},[s._v("nohup")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("tail")]),s._v(" -f /var/log/messages "),t("span",{attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("p",[t("code",[s._v("nohup")]),s._v("命令会将进程的输出保存到"),t("code",[s._v("nohup.out")]),s._v("文件中")])]),s._v(" "),t("p",[s._v("如果需要让我们的进程在系统启动的时候就运行，我们可以将其设置为守护进程。")]),s._v(" "),t("p",[t("strong",[s._v("[TODO]: 怎么创建守护进程")])]),s._v(" "),t("h3",{attrs:{id:"系统日志"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#系统日志","aria-hidden":"true"}},[s._v("#")]),s._v(" 系统日志")]),s._v(" "),t("p",[s._v("系统日志一般保存在"),t("code",[s._v("/var/log")]),s._v("中")]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/lsz/log1.png",alt:""}})]),s._v(" "),t("p",[t("code",[s._v("/var/log/messages")]),s._v("保存系统的常规日志")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token function"}},[s._v("tail")]),s._v(" -f /var/log/messages\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("code",[s._v("/var/log/dmesg")]),s._v("保存着内核输出的相关信息。这些内容一般会在内核刚刚启动的时候内核打印出来的。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token function"}},[s._v("tail")]),s._v(" -f /var/log/dmesg\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("code",[s._v("/var/log/secure")]),s._v("这个文件保存着系统的安全日志")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token function"}},[s._v("tail")]),s._v(" -f /var/log/secure\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("code",[s._v("/var/log/cron")]),s._v("这个文件保存着定时任务相关的日志输出")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token function"}},[s._v("tail")]),s._v(" -f /var/log/cron\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"服务管理工具systemctl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#服务管理工具systemctl","aria-hidden":"true"}},[s._v("#")]),s._v(" 服务管理工具"),t("code",[s._v("systemctl")])]),s._v(" "),t("p",[t("code",[s._v("服务(service)")]),s._v("提供了常见功能的守护进程集中管理的工具。主要包含"),t("code",[s._v("service")]),s._v("和"),t("code",[s._v("systemctl")]),s._v("命令。")]),s._v(" "),t("h3",{attrs:{id:"service"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#service","aria-hidden":"true"}},[s._v("#")]),s._v(" service")]),s._v(" "),t("p",[t("code",[s._v("service")]),s._v("的启动脚本一般都放在"),t("code",[s._v("/etc/init.d/")]),s._v("目录中。")]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/lsz/process23.png",alt:""}})]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("service")]),s._v("脚本就是一个bash文件")])]),s._v(" "),t("p",[t("code",[s._v("service")]),s._v("的启动是有不同级别的，我们可以通过"),t("code",[s._v("chkconfig --list")]),s._v("来查看。")]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/lsz/process25.png",alt:""}})]),s._v(" "),t("p",[s._v("其中"),t("code",[s._v("0-6")]),s._v("代表不同的级别。")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("0")]),s._v("：表示关机")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("init 0\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[t("code",[s._v("1")]),s._v(": 单用户，重置密码的时候可能会用到")]),s._v(" "),t("li",[t("code",[s._v("2")]),s._v(": 不带网络的多用户模式")]),s._v(" "),t("li",[t("code",[s._v("3")]),s._v("：字符终端模式")]),s._v(" "),t("li",[t("code",[s._v("4")]),s._v("：没有使用")]),s._v(" "),t("li",[t("code",[s._v("5")]),s._v("：图形模式")]),s._v(" "),t("li",[t("code",[s._v("6")]),s._v(": 重启")])]),s._v(" "),t("blockquote",[t("p",[s._v("最常用到的几个级别就是"),t("code",[s._v("0")]),s._v(", "),t("code",[s._v("3")]),s._v(", "),t("code",[s._v("6")]),s._v("。")])]),s._v(" "),t("p",[s._v("不同的服务在不同的级别中开关模式是不一样的。比如"),t("code",[s._v("network")]),s._v("服务，它在"),t("code",[s._v("0")]),s._v("和"),t("code",[s._v("1")]),s._v("级别下是关闭的，在其它级别下是开启的。")]),s._v(" "),t("h4",{attrs:{id:"操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#操作","aria-hidden":"true"}},[s._v("#")]),s._v(" 操作")]),s._v(" "),t("p",[t("code",[s._v("service")]),s._v("的一般操作会按照如下命令")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token function"}},[s._v("service")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("服务名称"),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" start/stop/restart\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("比如重启网络服务")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token function"}},[s._v("service")]),s._v(" network restart\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"systemctl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#systemctl","aria-hidden":"true"}},[s._v("#")]),s._v(" systemctl")]),s._v(" "),t("p",[t("code",[s._v("systemctl")]),s._v("的启动脚本一般都放在"),t("code",[s._v("/usr/lib/systemd/system")]),s._v("。")]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/lsz/process24.png",alt:""}})]),s._v(" "),t("h4",{attrs:{id:"操作-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#操作-2","aria-hidden":"true"}},[s._v("#")]),s._v(" 操作")]),s._v(" "),t("p",[t("code",[s._v("systemctl")]),s._v("有如下几种常见的操作。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("systemctl start"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("stop"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("restart"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("reload"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token function"}},[s._v("enable")]),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("disable 服务名称\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("# 查看服务状态")]),s._v("\nsystemctl status 服务名称\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("blockquote",[t("p",[t("code",[s._v("服务名称")]),s._v("就是在"),t("code",[s._v("/usr/lib/systemd/system")]),s._v("目录中包含的")])]),s._v(" "),t("p",[s._v("比如")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("# 停止服务")]),s._v("\nsystemctl stop sshd.service\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("code",[s._v("systemctl")]),s._v("设置服务的时候也有相应的级别。具体有哪些级别可以在"),t("code",[s._v("/lib/systemd/system")]),s._v("中查看")]),s._v(" "),t("p",[t("img",{attrs:{src:"/blog/lsz/process25.png",alt:""}})]),s._v(" "),t("p",[s._v("可以通过如下命令查看当前系统运行在哪个级别上")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@instance-6w9riila system"),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{attrs:{class:"token comment"}},[s._v("# systemctl get-default")]),s._v("\nmulti-user.target\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("可以通过如下命令设置级别")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("systemctl set-default graphical.target\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("p",[s._v("会在下次启动的时候生效")])]),s._v(" "),t("h2",{attrs:{id:"selinux简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#selinux简介","aria-hidden":"true"}},[s._v("#")]),s._v(" SELinux简介")])])}],!1,null,null,null);v.options.__file="19-进程管理.md";a.default=v.exports}}]);