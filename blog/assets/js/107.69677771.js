(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{176:function(v,e,_){"use strict";_.r(e);var t=_(0),s=Object(t.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var v=this,e=v.$createElement,_=v._self._c||e;return _("div",{staticClass:"content"},[_("h1",[v._v("网络管理")]),v._v(" "),_("p",[_("code",[v._v("linux")]),v._v("的网络管理主要分为如下几个方面：")]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("网络状态查看")])]),v._v(" "),_("li",[_("strong",[v._v("网络配置")])]),v._v(" "),_("li",[_("strong",[v._v("路由命令")])]),v._v(" "),_("li",[_("strong",[v._v("网络故障排除")])]),v._v(" "),_("li",[_("strong",[v._v("网络服务管理")])]),v._v(" "),_("li",[_("strong",[v._v("常用网络配置文件")])])]),v._v(" "),_("h2",{attrs:{id:"网络状态查看"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#网络状态查看","aria-hidden":"true"}},[v._v("#")]),v._v(" 网络状态查看")]),v._v(" "),_("h3",{attrs:{id:"net-tools"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#net-tools","aria-hidden":"true"}},[v._v("#")]),v._v(" net-tools")]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("ifconfig")])])]),v._v(" "),_("div",{staticClass:"language-bash line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-bash"}},[_("code",[_("span",{attrs:{class:"token function"}},[v._v("ifconfig")]),v._v("\n")])]),v._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[v._v("1")]),_("br")])]),_("p",[_("img",{attrs:{src:"/blog/lsz/lsz1.png",alt:""}})]),v._v(" "),_("p",[_("code",[v._v("eth0")]),v._v("称为第一块网卡，也称为网络接口。你的第一个网络接口也可能叫做下面的名字。")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("eno1")]),v._v("：板载网卡")]),v._v(" "),_("li",[_("code",[v._v("ens33")]),v._v("："),_("code",[v._v("PCI-E")]),v._v("网卡")]),v._v(" "),_("li",[_("code",[v._v("enp0s3")]),v._v("：无法获取物理信息的"),_("code",[v._v("PCI-E")]),v._v("网卡")])]),v._v(" "),_("p",[_("code",[v._v("centos7")]),v._v("使用了一致性网络设备命名，以上都不匹配则使用"),_("code",[v._v("eth0")]),v._v("。上面的网卡的名称是都可以转换成"),_("code",[v._v("eth0")]),v._v("的。网卡的命名规则受"),_("code",[v._v("biosdevname")]),v._v("和"),_("code",[v._v("net.ifnames")]),v._v("两个参数影响。我们可以编辑"),_("code",[v._v("/etc/default/grub")]),v._v("文件，增加"),_("code",[v._v("biosdevname=0 net.ifnames=0")]),v._v("，然后更新"),_("code",[v._v("grub")]),v._v("即可。")]),v._v(" "),_("div",{staticClass:"language-bash line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-bash"}},[_("code",[v._v("grub2-mkconfig -o /boot/grub2/grub.cfg\n\n"),_("span",{attrs:{class:"token comment"}},[v._v("# 然后重启")]),v._v("\n"),_("span",{attrs:{class:"token function"}},[v._v("reboot")]),v._v("\n")])]),v._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[v._v("1")]),_("br"),_("span",{staticClass:"line-number"},[v._v("2")]),_("br"),_("span",{staticClass:"line-number"},[v._v("3")]),_("br"),_("span",{staticClass:"line-number"},[v._v("4")]),_("br")])]),_("p",[v._v("详细步骤")]),v._v(" "),_("p",[_("img",{attrs:{src:"/blog/lsz/ifconfig1.png",alt:""}})]),v._v(" "),_("p",[_("img",{attrs:{src:"/blog/lsz/ifconfig2.png",alt:""}})]),v._v(" "),_("p",[_("img",{attrs:{src:"/blog/lsz/ifconfig3.png",alt:""}})]),v._v(" "),_("p",[_("img",{attrs:{src:"/blog/lsz/ifconfig4.png",alt:""}})]),v._v(" "),_("p",[_("code",[v._v("grub")]),v._v("文件更改好后，并不会马上生效，因为"),_("code",[v._v("grub")]),v._v("这个文件是不会被系统的启动设置读取的，它只是让用户进行操作的。所以，我们需要通过下面命令将其转化为系统真正可读取的。")]),v._v(" "),_("p",[_("img",{attrs:{src:"/blog/lsz/ifconfig5.png",alt:""}})]),v._v(" "),_("blockquote",[_("p",[_("code",[v._v("/boot/grub2/grub.cfg")]),v._v("是系统启动的时候真正读取的")])]),v._v(" "),_("p",[v._v("然后执行"),_("code",[v._v("reboot")]),v._v("命令重启后，就能发现网卡的名称被更改为了"),_("code",[v._v("eth0")])]),v._v(" "),_("p",[_("img",{attrs:{src:"/blog/lsz/ifconfig6.png",alt:""}})]),v._v(" "),_("p",[_("code",[v._v("biosdevname")]),v._v("和"),_("code",[v._v("net.ifnames")]),v._v("组合就能确认网卡名。")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("biosdevname=0")]),v._v("且"),_("code",[v._v("net.ifnames=0")]),v._v("组合，其网卡名是"),_("code",[v._v("eth0")])]),v._v(" "),_("li",[_("code",[v._v("biosdevname=0")]),v._v("且"),_("code",[v._v("net.ifnames=1")]),v._v("组合，其网卡名是"),_("code",[v._v("ens33")])]),v._v(" "),_("li",[_("code",[v._v("biosdevname=1")]),v._v("且"),_("code",[v._v("net.ifnames=0")]),v._v("组合，其网卡名是"),_("code",[v._v("em1")])])]),v._v(" "),_("blockquote",[_("p",[v._v("上面是"),_("code",[v._v("centos7")]),v._v("中才有的功能")])]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("mii-tool eth0")])])]),v._v(" "),_("p",[v._v("我们可以使用这个命令来查看网卡的网线的连接状态。")]),v._v(" "),_("p",[v._v("在"),_("code",[v._v("centos6")]),v._v("上可以直接使用"),_("code",[v._v("mii-tool")])]),v._v(" "),_("p",[_("img",{attrs:{src:"/blog/lsz/mii-tool1.png",alt:""}})]),v._v(" "),_("p",[v._v("在"),_("code",[v._v("centos7")]),v._v("上，"),_("code",[v._v("mii-tool")]),v._v("后面必须跟着一个接口。")]),v._v(" "),_("blockquote",[_("p",[v._v("如果出现"),_("code",[v._v("SIOCGMIIPHY on 'eth0' failed: Operation not supported")]),v._v("这个错误，说明你用的是虚拟机。")])]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("route")])])]),v._v(" "),_("p",[v._v("我们可以通过"),_("code",[v._v("route -n")]),v._v("来查看网关。使用"),_("code",[v._v("-n")]),v._v("参数就不解析主机名称。")]),v._v(" "),_("p",[_("img",{attrs:{src:"/blog/lsz/route1.png",alt:""}})]),v._v(" "),_("p",[v._v("如果我们直接使用"),_("code",[v._v("route")]),v._v("命令，它会把网关的"),_("code",[v._v("ip")]),v._v("直接解析成域名。如果解析的速度很慢，"),_("code",[v._v("route")]),v._v("命令就需要一直等待。上面显示的结果的第一列是目的地址，如果目的地址是"),_("code",[v._v("default")]),v._v("，则下一跳地址就是第二列"),_("code",[v._v("Gateway")]),v._v("中指出的，这也是默认网关。除了默认网关外，我们也可以针对某个目的地址配置具体的网关地址，这种配置方式也被称为静态路由。")])])}],!1,null,null,null);s.options.__file="14-网络管理.md";e.default=s.exports}}]);