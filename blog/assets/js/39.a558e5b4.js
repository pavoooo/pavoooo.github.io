(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{213:function(t,s,n){"use strict";n.r(s);var a=n(0),e=Object(a.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[n("h1",[t._v("Nginx学习-安装_基本模块_请求限制_访问限制")]),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),n("ol",[n("li",[t._v("在"),n("a",{attrs:{href:"http://nginx.org/en/linux_packages.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("nginx.org"),n("OutboundLink")],1),t._v("中根据自己的操作系统选择对应的安装方式。对于"),n("code",[t._v("centos")]),t._v("系统而言，我们可以选择通过"),n("code",[t._v("yum")]),t._v("的安装方式。所以，我们需要在系统中添加"),n("code",[t._v("Nginx")]),t._v("的"),n("code",[t._v("yum")]),t._v("源。")])]),t._v(" "),t._m(16),t._m(17),t._v(" "),t._m(18),t._m(19),t._v(" "),t._m(20),n("p",[t._v("如果有如下输出，就表示安装成功。当然，不同的系统和版本输出可能会不一样")]),t._v(" "),t._m(21),t._m(22),t._v(" "),t._m(23),t._m(24),t._v(" "),t._m(25),n("p",[t._v("同样不同的系统和版本可能会有不同的输出")]),t._v(" "),t._m(26),t._m(27),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),n("p",[t._v("cgi，fastcgi相关配置的配置文件")]),t._v(" "),t._m(30),t._v(" "),n("p",[t._v("编码转换映射转化相关的配置文件")]),t._v(" "),t._m(31),t._v(" "),n("p",[t._v("设置http协议content-type头部与扩展名的对应关系")]),t._v(" "),t._m(32),t._v(" "),n("p",[t._v("用于配制系统守护进程管理器管理方式")]),t._v(" "),t._m(33),t._v(" "),n("p",[t._v("nginx模块目录")]),t._v(" "),t._m(34),t._v(" "),n("p",[t._v("nginx服务的启动管理终端命令")]),t._v(" "),t._m(35),t._v(" "),n("p",[t._v("nginx的手册和帮助文件")]),t._v(" "),t._m(36),t._v(" "),n("p",[t._v("nginx的缓存目录")]),t._v(" "),t._m(37),t._v(" "),n("p",[t._v("nginx的日志目录")]),t._v(" "),t._m(38),t._v(" "),t._m(39),t._v(" "),t._m(40),t._v(" "),t._m(41),t._v(" "),t._m(42),t._m(43),t._v(" "),t._m(44),t._v(" "),t._m(45),t._m(46),t._v(" "),t._m(47),t._m(48),t._v(" "),t._m(49),t._v(" "),t._m(50),t._v(" "),t._m(51),t._v(" "),t._m(52),t._v(" "),t._m(53),t._v(" "),t._m(54),t._v(" "),t._m(55),t._v(" "),t._m(56),t._m(57),t._v(" "),t._m(58),t._v(" "),t._m(59),t._m(60),t._v(" "),t._m(61),t._v(" "),t._m(62),t._m(63),t._v(" "),n("p",[n("a",{attrs:{href:"http://nginx.org/en/docs/http/ngx_http_log_module.html#access_log",target:"_blank",rel:"noopener noreferrer"}},[t._v("内置变量"),n("OutboundLink")],1),t._v("是"),n("code",[t._v("Nginx")]),t._v("为我们提供的。比如上面定义日志格式的时候涉及到的一些内置变量。")]),t._v(" "),t._m(64),t._m(65),t._v(" "),t._m(66),t._v(" "),t._m(67),n("p",[t._v("比如")]),t._v(" "),t._m(68),t._m(69),t._v(" "),t._m(70),t._v(" "),t._m(71),t._m(72),t._m(73),t._v(" "),t._m(74),t._v(" "),t._m(75),t._v(" "),t._m(76),t._m(77),t._v(" "),t._m(78),t._m(79),t._v(" "),t._m(80),t._m(81),t._v(" "),t._m(82),t._v(" "),n("p",[t._v("配置语法如下：")]),t._v(" "),t._m(83),t._m(84),t._v(" "),t._m(85),t._m(86),t._v(" "),t._m(87),t._v(" "),t._m(88),t._v(" "),n("p",[t._v("这个模块主要有如下几个指令配置：")]),t._v(" "),t._m(89),t._v(" "),t._m(90),t._m(91),t._v(" "),t._m(92),t._m(93),t._v(" "),t._m(94),t._m(95),t._v(" "),t._m(96),t._m(97),t._v(" "),t._m(98),t._v(" "),t._m(99),t._m(100),t._v(" "),t._m(101),t._m(102),t._v(" "),t._m(103),t._m(104),t._v(" "),t._m(105),t._m(106),t._v(" "),t._m(107),t._v(" "),t._m(108),t._v(" "),t._m(109),t._v(" "),t._m(110),t._v(" "),t._m(111),t._v(" "),t._m(112),t._v(" "),t._m(113),t._v(" "),t._m(114),t._v(" "),t._m(115),t._m(116),t._v(" "),t._m(117),t._m(118),t._v(" "),t._m(119),t._v(" "),t._m(120),t._m(121),t._v(" "),n("p",[t._v("请求频率的限制语法和上面的连接频率限制的语法相似")]),t._v(" "),t._m(122),t._m(123),t._v(" "),t._m(124),t._m(125),t._v(" "),t._m(126),t._m(127),t._v(" "),t._m(128),t._v(" "),t._m(129),t._v(" "),t._m(130),n("p",[t._v("然后通过ab进行测试")]),t._v(" "),t._m(131),t._m(132),t._m(133),t._v(" "),t._m(134),t._v(" "),t._m(135),t._m(136),t._m(137),t._v(" "),t._m(138),t._v(" "),t._m(139),t._v(" "),t._m(140),t._v(" "),t._m(141),t._v(" "),t._m(142),t._v(" "),t._m(143),t._v(" "),t._m(144),t._m(145),t._v(" "),t._m(146),t._m(147),t._v(" "),t._m(148),t._v(" "),t._m(149),t._v(" "),t._m(150),t._m(151),t._v(" "),t._m(152),t._m(153),t._v(" "),t._m(154),t._v(" "),t._m(155),t._v(" "),t._m(156),t._m(157),t._v(" "),t._m(158),t._m(159),t._v(" "),t._m(160),n("p",[t._v("根据提示输入密码即可。")]),t._v(" "),n("p",[t._v("下面是一段关于用户认证的配置")]),t._v(" "),t._m(161),t._m(162)])},[function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[n("code",[t._v("Nginx")]),t._v("是目前一款主流的"),n("code",[t._v("web")]),t._v("服务器。"),n("code",[t._v("Nginx")]),t._v("相对于其它"),n("code",[t._v("web")]),t._v("服务器，比如，"),n("code",[t._v("tomcat")]),t._v("，"),n("code",[t._v("apache")]),t._v("等具有如下优点。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"优势"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#优势","aria-hidden":"true"}},[this._v("#")]),this._v(" 优势")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("高并发，高性能")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("很多web服务器随着并发连接的上升，"),s("code",[this._v("rps")]),this._v("会急剧下降。"),s("code",[this._v("nginx")]),this._v("高并发和高性能是同时具有的。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("可扩展性好")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("可扩展性的\b主要体现在"),s("code",[this._v("Nginx")]),this._v("的模块化设计，第三方模块和生态圈是十分丰富的。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("高可靠性")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("高可靠性主要体现在"),s("code",[this._v("Nginx")]),this._v("可以在服务器上持续不间断的运行数年。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("热部署")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("体现在在不重启"),s("code",[this._v("Nginx")]),this._v("的情况下升级"),s("code",[this._v("Nginx")]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"用途"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#用途","aria-hidden":"true"}},[this._v("#")]),this._v(" 用途")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在实际的应用场景中，"),s("code",[this._v("Nginx")]),this._v("一般有如下几种用途：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ul",[n("li",[n("p",[t._v("静态资源服务")]),t._v(" "),n("ul",[n("li",[t._v("通过本地文件系统提供服务")])])]),t._v(" "),n("li",[n("p",[t._v("反向代理服务")]),t._v(" "),n("ul",[n("li",[t._v("Nginx强大的性能")]),t._v(" "),n("li",[t._v("缓存")]),t._v(" "),n("li",[t._v("负载均衡")])])]),t._v(" "),n("li",[n("p",[t._v("API 服务")]),t._v(" "),n("ul",[n("li",[t._v("OpenResty")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装","aria-hidden":"true"}},[this._v("#")]),this._v(" 安装")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[n("code",[t._v("Nginx")]),t._v("的安装有源码编译和工具安装两种方式。因为我的服务器是"),n("code",[t._v("centos")]),t._v("，所以这里着重介绍如何通过"),n("code",[t._v("yum")]),t._v("来安装"),n("code",[t._v("Nginx")]),t._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("yum")]),this._v("安装"),s("code",[this._v("Nginx")]),this._v("有如下步骤：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token comment"}},[this._v("# 安装yum-utils")]),this._v("\nyum "),s("span",{attrs:{class:"token function"}},[this._v("install")]),this._v(" yum-utils\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("然后在文件"),s("code",[this._v("/etc/yum.repos.d/nginx.repo")]),this._v("中添加如下内容")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-txt line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("[nginx-stable]\nname=nginx stable repo\nbaseurl=http://nginx.org/packages/centos/$releasever/$basearch/\ngpgcheck=1\nenabled=1\ngpgkey=https://nginx.org/keys/nginx_signing.key\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("这里我们安装的是"),n("code",[t._v("Nginx")]),t._v("的"),n("code",[t._v("stable")]),t._v("版本。当然你也可以选择安装"),n("code",[t._v("mainline")]),t._v("版本，安装方式可参考上述链接中提供的方法自行安装。为了确定我们的"),n("code",[t._v("yum")]),t._v("源安装成功，可以执行如下命令：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[this._v("yum list "),s("span",{attrs:{class:"token operator"}},[this._v("|")]),this._v(" "),s("span",{attrs:{class:"token function"}},[this._v("grep")]),this._v(" nginx\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-txt line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("nginx.x86_64                      1.14.2-1.el6.ngx   @nginx-stable\nnginx-module-geoip.x86_64         1.14.2-1.el6.ngx   @nginx-stable\n...\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br"),s("span",{staticClass:"line-number"},[this._v("3")]),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[s("code",[this._v("yum")]),this._v("源安装好之后，我们就可以直接"),s("code",[this._v("install")]),this._v("命令来安装"),s("code",[this._v("Nginx")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[this._v("yum "),s("span",{attrs:{class:"token function"}},[this._v("install")]),this._v(" nginx\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("Nginx")]),this._v("安装成功后，可以执行如下命令查看"),s("code",[this._v("Nginx")]),this._v("的安装目录")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[this._v("rpm -ql nginx\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-txt line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("/etc/logrotate.d/nginx\n/etc/nginx\n/etc/nginx/conf.d\n/etc/nginx/conf.d/default.conf\n/etc/nginx/fastcgi_params\n/etc/nginx/koi-utf\n/etc/nginx/koi-win\n/etc/nginx/mime.types\n/etc/nginx/modules\n/etc/nginx/nginx.conf\n/etc/nginx/scgi_params\n/etc/nginx/uwsgi_params\n/etc/nginx/win-utf\n/etc/rc.d/init.d/nginx\n/etc/rc.d/init.d/nginx-debug\n/etc/sysconfig/nginx\n/etc/sysconfig/nginx-debug\n/usr/lib64/nginx\n/usr/lib64/nginx/modules\n/usr/sbin/nginx\n/usr/sbin/nginx-debug\n/usr/share/doc/nginx-1.14.2\n/usr/share/doc/nginx-1.14.2/COPYRIGHT\n/usr/share/man/man8/nginx.8.gz\n/usr/share/nginx\n/usr/share/nginx/html\n/usr/share/nginx/html/50x.html\n/usr/share/nginx/html/index.html\n/var/cache/nginx\n/var/log/nginx\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"nginx安装目录介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx安装目录介绍","aria-hidden":"true"}},[this._v("#")]),this._v(" Nginx安装目录介绍")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("为了能够更好的学习"),s("code",[this._v("Nginx")]),this._v("，我们需要对"),s("code",[this._v("Nginx")]),this._v("的安装目录有一个大致的了解。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ul",[n("li",[n("p",[n("code",[t._v("/etc/logrotate.d/nginx")]),t._v("：配置文件。Nginx日志轮转，用于logrotate服务的日志切割")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("/etc/nginx")]),t._v("：目录、配置文件。nginx的主配置文件")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("/etc/nginx/nginx.conf")])]),t._v(" "),n("li",[n("code",[t._v("/etc/nginx/conf.d/*.conf")])])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("code",[this._v("/etc/nginx/fastcgi_params")])]),this._v(" "),s("li",[s("code",[this._v("/etc/nginx/uwsgi_params")])]),this._v(" "),s("li",[s("code",[this._v("/etc/nginx/scgi_params")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("code",[this._v("/etc/nginx/koi-utf")])]),this._v(" "),s("li",[s("code",[this._v("/etc/nginx/koi-win")])]),this._v(" "),s("li",[s("code",[this._v("/etc/nginx/win-utf")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("code",[this._v("/etc/nginx/mime.type")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("code",[this._v("/etc/sysconfig/nginx")])]),this._v(" "),s("li",[s("code",[this._v("/etc/sysconfig/nginx-debug")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("code",[this._v("/etc/nginx/modules")])]),this._v(" "),s("li",[s("code",[this._v("/usr/lib64/nginx/modules")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("code",[this._v("/usr/sbin/nginx")])]),this._v(" "),s("li",[s("code",[this._v("/usr/sbin/nginx-debug")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("code",[this._v("/usr/share/doc/nginx-1.14.2")])]),this._v(" "),s("li",[s("code",[this._v("/usr/share/doc/nginx-1.14.2/COPYRIGHT")])]),this._v(" "),s("li",[s("code",[this._v("/usr/share/man/man8/nginx.8.gz")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("code",[this._v("/var/cache/nginx")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("code",[this._v("/var/log/nginx")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("当然，上面的目录是"),s("code",[this._v("Nginx")]),this._v("安装成功后默认生成的目录。有一些目录我们可以根据自己的需要在配置文件中进行更改。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"nginx命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx命令","aria-hidden":"true"}},[this._v("#")]),this._v(" Nginx命令")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("Nginx")]),this._v("在运行的过程中可能会设计到如下命令")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("# 启动nginx，这种方式会使用默认的nginx配置文件。也就是/etc/nginx/nginx.conf")]),t._v("\nnginx\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 启动nginx的时候指定配置文件")]),t._v("\nnginx -c /etc/nginx/新的nginx配置文件\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 停止nginx")]),t._v("\nnginx -s stop\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 重启nginx")]),t._v("\nnginx -s reload\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 检查配置文件语法的准确性")]),t._v("\nnginx -tc 配置文件路径\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"nginx日志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx日志","aria-hidden":"true"}},[this._v("#")]),this._v(" Nginx日志")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("Nginx")]),this._v("中的日志主要有两种：访问日志和错误日志。下面是"),s("code",[this._v("Nginx")]),this._v("安装的成功后默认的配置文件的部分内容")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("error_log")]),t._v("  "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("var"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("log"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("error"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log warn"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[t._v("http")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("log_format")]),t._v("  main  "),n("span",{attrs:{class:"token string"}},[t._v("'$remote_addr - $remote_user [$time_local] \"$request\" '")]),t._v("\n                      "),n("span",{attrs:{class:"token string"}},[t._v("'$status $body_bytes_sent \"$http_referer\" '")]),t._v("\n                      "),n("span",{attrs:{class:"token string"}},[t._v('\'"$http_user_agent" "$http_x_forwarded_for"\'')]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("access_log")]),t._v("  "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("var"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("log"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("access"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log  main"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("include")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("conf"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("d"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),n("span",{attrs:{class:"token operator"}},[t._v("*")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("conf"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[n("code",[t._v("Nginx")]),t._v("的错误日志通过"),n("code",[t._v("error_log")]),t._v("指令配置，默认保存在"),n("code",[t._v("/var/log/nginx/error.log")]),t._v("文件中，日志的级别是"),n("code",[t._v("warn")]),t._v("。访问日志是通过"),n("code",[t._v("access_log")]),t._v("指令配置的，对于每一个"),n("code",[t._v("http")]),t._v("请求其访问日志默认保存在"),n("code",[t._v("/var/log/nginx/access.log")]),t._v("，日志的格式就是"),n("code",[t._v("main")]),t._v("所指向的"),n("code",[t._v("log_format")]),t._v("指令配置的。当然，对于访问日志你可以定义在"),n("code",[t._v("main")]),t._v("，"),n("code",[t._v("http")]),t._v("，"),n("code",[t._v("server")]),t._v("块中，不同的地方拥有不同的控制范围。日志的格式通过"),n("code",[t._v("log_format")]),t._v("指令配置，"),n("code",[t._v("log_format")]),t._v("的语法如下：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("log_format")]),t._v(" name "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("escape"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("json"),n("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v("default"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" string"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在定义日志格式的时候，我们可以使用任意的"),s("code",[this._v("Nginx")]),this._v("变量。默认日志中所使用到的变量有")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ul",[n("li",[t._v("$remote_addr：表示客户端的地址")]),t._v(" "),n("li",[t._v("$remote_user：表示客户端请求nginx认证的用户名，如果没有开启认证模块的话，这个是不会被记录的")]),t._v(" "),n("li",[t._v("$time_local：表示nginx的时间")]),t._v(" "),n("li",[t._v("$request：表示request头部的请求行。GET / HTTP/1.1等")]),t._v(" "),n("li",[t._v("$status：表示的是响应状态码")]),t._v(" "),n("li",[t._v("$body_bytes_sent：从服务端响应给客户端body的大小")]),t._v(" "),n("li",[t._v("$http_referer：客户端referer")]),t._v(" "),n("li",[t._v("$http_user_agent：客户端的user-agent字段")]),t._v(" "),n("li",[t._v("$http_x_forwarded_for：每一级代理服务器的http信息")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"nginx变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx变量","aria-hidden":"true"}},[this._v("#")]),this._v(" Nginx变量")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("Nginx")]),this._v("中的变量主要有三种：内置变量，http请求变量和自定义变量。"),s("code",[this._v("Nginx")]),this._v("中的变量一般通过"),s("code",[this._v("$")]),this._v("进行获取。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("http请求中的变量")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("http")]),this._v("请求中的变量并不是指唯一变量，而是有无限多变种的一种变量。主要有如下三种：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("arg_PARAMETERS")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("这类变量就是用来获取当前请求中的参数值。比如我们的请求路径是"),s("code",[this._v("/arg?name=saisai&age=25")]),this._v("。那我们就可以通过如下变量获取"),s("code",[this._v("name")]),this._v("和"),s("code",[this._v("age")]),this._v("对应的值。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("arg "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("# 获取请求参数name的值")]),t._v("\n  echo "),n("span",{attrs:{class:"token string"}},[t._v('"$arg_name"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("# 获取请求参数age的值")]),t._v("\n  echo "),n("span",{attrs:{class:"token string"}},[t._v('"$arg_age"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("http_HEADER")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("这类变量主要是用来获取请求头部中相关字段的值。比如获取"),s("code",[this._v("http")]),this._v("请求头部"),s("code",[this._v("user-agent")]),this._v("的值，可以通过变量"),s("code",[this._v("$http_user_agent")]),this._v("来获取。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("user_agent "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  echo "),n("span",{attrs:{class:"token string"}},[t._v('"$http_user_agent"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("sent_http_HEADER")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("当然，有请求就有响应。这类变量主要是用来获取"),s("code",[this._v("http")]),this._v("响应头信息。比如，获取响应头部中的"),s("code",[this._v("content-length")]),this._v("的值")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("content"),n("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("length "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  echo "),n("span",{attrs:{class:"token string"}},[t._v('"$sent_http_content_length"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[this._v("内置变量")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("log_format")]),t._v("  main  "),n("span",{attrs:{class:"token string"}},[t._v("'$remote_addr - $remote_user [$time_local] \"$request\" '")]),t._v("\n    "),n("span",{attrs:{class:"token string"}},[t._v("'$status $body_bytes_sent \"$http_referer\" '")]),t._v("\n    "),n("span",{attrs:{class:"token string"}},[t._v('\'"$http_user_agent" "$http_x_forwarded_for"\'')]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"3"}},[s("li",[this._v("自定义变量")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("Nginx")]),this._v("允许我们在配置文件中使用自定义变量。自定义变量通过"),s("code",[this._v("set")]),this._v("来指定。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[this._v("set")]),this._v(" $变量名 变量值\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("set")]),t._v(" "),n("span",{attrs:{class:"token variable"}},[t._v("$hello")]),t._v(" hello"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  echo "),n("span",{attrs:{class:"token string"}},[t._v('"$hello"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"nginx模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx模块","aria-hidden":"true"}},[this._v("#")]),this._v(" Nginx模块")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("Nginx")]),this._v("是基于模块化的设计。"),s("code",[this._v("Nginx")]),this._v("中的模块也分为官方模块和第三方模块。可以通过如下命令来查看"),s("code",[this._v("Nginx")]),this._v("在安装的过程中所安装的一些模块。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[this._v("nginx -V\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-txt line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("nginx version: nginx/1.14.2\nbuilt by gcc 4.4.7 20120313 (Red Hat 4.4.7-23) (GCC)\nbuilt with OpenSSL 1.0.1e-fips 11 Feb 2013\nTLS SNI support enabled\nconfigure arguments: --prefix=/etc/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib64/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --pid-path=/var/run/nginx.pid --lock-path=/var/run/nginx.lock --http-client-body-temp-path=/var/cache/nginx/client_temp --http-proxy-temp-path=/var/cache/nginx/proxy_temp --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp --http-scgi-temp-path=/var/cache/nginx/scgi_temp --user=nginx --group=nginx --with-compat --with-file-aio --with-threads --with-http_addition_module --with-http_auth_request_module --with-http_dav_module --with-http_flv_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_mp4_module --with-http_random_index_module --with-http_realip_module --with-http_secure_link_module --with-http_slice_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_v2_module --with-mail --with-mail_ssl_module --with-stream --with-stream_realip_module --with-stream_ssl_module --with-stream_ssl_preread_module --with-cc-opt='-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -fPIC' --with-ld-opt='-Wl,-z,relro -Wl,-z,now -pie'\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br"),s("span",{staticClass:"line-number"},[this._v("3")]),s("br"),s("span",{staticClass:"line-number"},[this._v("4")]),s("br"),s("span",{staticClass:"line-number"},[this._v("5")]),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"http-stub-status-module"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http-stub-status-module","aria-hidden":"true"}},[this._v("#")]),this._v(" http_stub_status_module")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("这个模块主要是用来查看"),s("code",[this._v("Nginx")]),this._v("当前的连接状态。通过在编译的时候添加"),s("code",[this._v("--with-http_stub_status_module")]),this._v("参数启动。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("模块启动后，可以通过指令"),s("code",[this._v("stub_status")]),this._v("配置。基本语法如下：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[t._v("Syntax"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\t"),n("span",{attrs:{class:"token keyword"}},[t._v("stub_status")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nDefault"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" —\nContext"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("server")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("比如，"),s("code",[this._v("Nginx")]),this._v("有如下配置")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("mystatus "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("stub_status")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("当我们访问"),s("code",[this._v("http://192.168.144.129/mystatus")]),this._v("会在网页中看到如下内容")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[t._v("Active connections"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("2")]),t._v("  "),n("span",{attrs:{class:"token comment"}},[t._v("# nginx当前活跃的连接数")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("server")]),t._v(" accepts handled requests\n "),n("span",{attrs:{class:"token number"}},[t._v("12")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("12")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("8")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("# 第一个12表示的是nginx处理的握手的总的次数 第二个12表示的nginx处理的连接数 第三个8表示nginx的总的连接数。正常情况下 第一个和第二个数字是相等的，表示没有丢失")]),t._v("\nReading"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("0")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("# 表示正在读取的数目")]),t._v("\nWriting"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("# 表示正在写的连接数")]),t._v("\nWaiting"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("# 表示建立的连接数。nginx在开启了keep-alive情况下")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"http-random-index-module"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http-random-index-module","aria-hidden":"true"}},[this._v("#")]),this._v(" http_random_index_module")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("这个模块主要用于在主目录中随机选择一个文件作为主页，但这个模块是不会选择隐藏文件作为主页的。可以在编译的时候通过指定"),s("code",[this._v("--with-http_random_index_module")]),this._v("参数来指定。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[t._v("Syntax"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\t"),n("span",{attrs:{class:"token keyword"}},[t._v("random_index")]),t._v(" on "),n("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" off"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nDefault"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("random_index")]),t._v(" off"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nContext"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("假如我们的"),s("code",[this._v("Nginx")]),this._v("有如下配置")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("root")]),t._v("   "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("share"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("random_index")]),t._v(" on"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("每次访问"),s("code",[this._v("http://192.168.144.129")]),this._v("都可能会看到一个随机的页面显示。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"http-sub-module"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http-sub-module","aria-hidden":"true"}},[this._v("#")]),this._v(" http_sub_module")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("这个模块主要用于对"),s("code",[this._v("http")]),this._v("响应中的内容进行替换。通过在编译的时候添加 "),s("code",[this._v("--with-http_sub_module")]),this._v(" 参数启动。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("strong",[this._v("配置一：对body中返回的内容进行替换")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[t._v("syntax"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("sub_filter")]),t._v(" string replacement"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndefault"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("\ncontext"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("http")]),n("span",{attrs:{class:"token operator"}},[t._v("/")]),n("span",{attrs:{class:"token keyword"}},[t._v("server")]),n("span",{attrs:{class:"token operator"}},[t._v("/")]),n("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("假设在我们的服务器上存在文件"),s("code",[this._v("/opt/app/code/index.html")]),this._v("，其内容如下：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("saisai"),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("zhao"),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("saisai"),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("我们的"),s("code",[this._v("Nginx")]),this._v("配置如下")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("root")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("opt"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("app"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("code"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("htm"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("# 配置需要替换的内容")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("sub_filter")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'<a>saisai'")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'<a>SAISAI'")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("重启"),s("code",[this._v("Nginx")]),this._v("后，访问"),s("code",[this._v("http://192.168.144.129")]),this._v("。返回客户端的内容如下")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("SAISAI"),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("zhao"),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("saisai"),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("默认情况下，"),s("code",[this._v("sub_filter")]),this._v("只会替换第一个匹配的内容。我们可以通过配置下面的指令来替换所有匹配的内容。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("strong",[this._v("配置二：对body中匹配的内容进行全部的替换")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[t._v("syntax"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("sub_filter_once")]),t._v(" on "),n("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" off"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndefault"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("sub_filter_once")]),t._v(" on"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ncontext"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("http")]),n("span",{attrs:{class:"token operator"}},[t._v("/")]),n("span",{attrs:{class:"token keyword"}},[t._v("server")]),n("span",{attrs:{class:"token operator"}},[t._v("/")]),n("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("同样是上面的"),s("code",[this._v("html")]),this._v("文件，如果我们的"),s("code",[this._v("Nginx")]),this._v("配置如下")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("root")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("opt"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("app"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("code"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("htm"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("# 配置需要替换的内容")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("sub_filter")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'<a>saisai'")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'<a>SAISAI'")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("# 替换所有匹配的内容")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("sub_filter_once")]),t._v(" off"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("这时访问"),s("code",[this._v("http://192.168.144.129")]),this._v("。返回客户端的内容如下")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("SAISAI"),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("zhao"),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("SAISAI"),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("strong",[this._v("配置三：判断资源的内容是否更新。如果有更新返回最新文件，否则返回304；")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[t._v("syntax"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" sub_filter_last_modified on "),n("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" off"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndefault"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" sub_filter_last_modified off"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ncontext"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("http")]),n("span",{attrs:{class:"token operator"}},[t._v("/")]),n("span",{attrs:{class:"token keyword"}},[t._v("server")]),n("span",{attrs:{class:"token operator"}},[t._v("/")]),n("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("这个配置是协商缓存的一种方式，依赖对"),s("code",[this._v("last-modified")]),this._v("和"),s("code",[this._v("if-modified-since")]),this._v("头部的判断。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"nginx请求限制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx请求限制","aria-hidden":"true"}},[this._v("#")]),this._v(" Nginx请求限制")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("Nginx")]),this._v("对请求的限制主要包括两方面：连接频率的限制和请求频率的限制。其中，连接频率的限制通过模块"),s("code",[this._v("limit_conn_module")]),this._v("配置，请求频率的限制通过模块"),s("code",[this._v("limit_req_module")]),this._v("配置。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("为了区分上述两种限制的不同之处，我们得知道"),s("code",[this._v("连接")]),this._v("和"),s("code",[this._v("请求")]),this._v("有什么不同。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"/blog/conn_req.png",alt:""}})])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[n("code",[t._v("连接")]),t._v("是指"),n("code",[t._v("connection")]),t._v("，即我们常说的"),n("code",[t._v("tcp")]),t._v("连接。建立一个"),n("code",[t._v("tcp")]),t._v("连接必须要通过三次握手。\n"),n("code",[t._v("请求")]),t._v("是指"),n("code",[t._v("request")]),t._v("，即"),n("code",[t._v("http")]),t._v("请求。"),n("code",[t._v("http")]),t._v("请求是构建在"),n("code",[t._v("tcp")]),t._v("连接上的。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[n("code",[t._v("tcp")]),t._v("连接是有状态的，而构建在tcp之上的http却是无状态的协议。在一个"),n("code",[t._v("tcp")]),t._v("连接的生命周期中，会存在一个或者多个请求，这主要是为了加快效率，避免每次请求都要三次握手建立连接，现在的"),n("code",[t._v("HTTP/1.1")]),t._v("协议都支持这种特性，叫做"),n("code",[t._v("keepalive")]),t._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("明白了二者的区别后，就可以了解"),s("code",[this._v("Nginx")]),this._v("是怎么对这两种限制进行配置。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("连接频率的限制")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[t._v("syntax"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("limit_conn_zone")]),t._v(" key zone"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("name"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("size"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndefault"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("\ncontext"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("http")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("通过"),n("code",[t._v("limit_conn_zone")]),t._v("指令来设置限制的维度。"),n("code",[t._v("key")]),t._v("是维度变量。"),n("code",[t._v("zone")]),t._v("用来设置共享内存的名称和大小。比如，我们想基于客户端的"),n("code",[t._v("ip")]),t._v("地址进行限制，那么"),n("code",[t._v("key")]),t._v("就应该设置为客户端的"),n("code",[t._v("ip")]),t._v("地址"),n("code",[t._v("$remote_addr")]),t._v("。这个指令设置完成后，我们还需要通过"),n("code",[t._v("limit_conn")]),t._v("指令进行调用才能生效。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[t._v("syntax"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("limit_conn")]),t._v(" zone number"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndefault"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("\ncontext"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("http")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("location")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("server")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("上面的配置是在"),n("code",[t._v("limit_conn_zone")]),t._v("配置好的基础上进行配置的。"),n("code",[t._v("zone")]),t._v("就是在"),n("code",[t._v("limit_conn_zone")]),t._v("中设置的名字，"),n("code",[t._v("number")]),t._v("就是限制的连接数。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("基于上述语法，我们可以对"),s("code",[this._v("nginx")]),this._v("进行如下配置来进行连接频率的限制")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("http")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("limit_conn_zone")]),t._v(" "),n("span",{attrs:{class:"token variable"}},[t._v("$binary_remote_addr")]),t._v(" zone"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("conn_zone"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("m"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("server")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{attrs:{class:"token keyword"}},[t._v("root")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("opt"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("app"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("code"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{attrs:{class:"token comment"}},[t._v("# 对连接进行限制")]),t._v("\n      "),n("span",{attrs:{class:"token keyword"}},[t._v("limit_conn")]),t._v(" conn_zone "),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),t._v("  "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("htm"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("请求频率的限制")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[t._v("syntax"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("limit_req_zone")]),t._v(" key zone"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("name"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("size rate"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("rate"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndefault"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("\ncontext"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("http")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("相对于连接频率的限制，在请求频率限制的配置中多了一个"),s("code",[this._v("rate")]),this._v("配置。用于设置最大的请求频率。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[t._v("syntax"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("limit_req")]),t._v(" zone"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("name "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("burst"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("number"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("nodelay"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndefault"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("\ncontext"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("http")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("location")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("server")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在"),s("code",[this._v("limit_req")]),this._v("中多了"),s("code",[this._v("burst")]),this._v("用来表示缓存住的请求数。"),s("code",[this._v("nodelay")]),this._v("用来表示是否希望请求延迟。比如下面的配置")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("limit_req")]),t._v("   zone"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("req_one  burst"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("120")]),t._v(" nodelay"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("加上 "),s("code",[this._v("nodelay")]),this._v("之后超过 "),s("code",[this._v("burst")]),this._v("大小的请求就会直接返回503。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("下面是两个"),s("code",[this._v("Nginx")]),this._v("配置")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("配置一")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("http")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("# 下面配置的含义就是对于同一个客户端ip地址的请求限制在1s的时间内请求一个")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("# 其中这个zone的空间的大小是1m")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("limit_req_zone")]),t._v(" "),n("span",{attrs:{class:"token variable"}},[t._v("$binary_remote_addr")]),t._v(" zone"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("req_zone"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("m rate"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("r"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("s"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("server")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{attrs:{class:"token keyword"}},[t._v("root")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("opt"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("app"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("code"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{attrs:{class:"token comment"}},[t._v("# 对请求进行限制")]),t._v("\n      "),n("span",{attrs:{class:"token keyword"}},[t._v("limit_req")]),t._v(" zone"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("req_zone"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),t._v("  "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("htm"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[this._v("ab -n 50 -c 2 http://192.168.144.129/1.html\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nNon-2xx responses:      49\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("上面的配置表示对于同一个客户端ip地址的请求限制在1s的时间内请求一个。使用"),s("code",[this._v("ab")]),this._v("测试"),s("code",[this._v("50")]),this._v("个请求，会发现失败的请求数是"),s("code",[this._v("49")]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("配置二")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("http")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("# 下面配置的含义就是对于同一个客户端ip地址的请求限制在1s的时间内请求一个")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("# 其中这个zone的空间的大小是1m")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("limit_req_zone")]),t._v(" "),n("span",{attrs:{class:"token variable"}},[t._v("$binary_remote_addr")]),t._v(" zone"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("req_zone"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("m rate"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("r"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("s"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("server")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{attrs:{class:"token keyword"}},[t._v("root")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("opt"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("app"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("code"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{attrs:{class:"token comment"}},[t._v("# 对请求进行限制，当客户端的请求超过限制后，遗留三个请求到下一秒处理，其它的直接返回错误状态503")]),t._v("\n      "),n("span",{attrs:{class:"token keyword"}},[t._v("limit_req")]),t._v(" zone"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("req_zone burst"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("3")]),t._v(" nodelay"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),t._v("  "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("htm"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nNon-2xx responses:      46\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[n("code",[t._v("Nginx")]),t._v("会成功处理1个请求，然后遗留3个请求到下一秒处理。所以，对于"),n("code",[t._v("ab")]),t._v("的"),n("code",[t._v("50")]),t._v("个请求会成功处理4个，失败"),n("code",[t._v("46")]),t._v("个。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"nginx的访问控制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx的访问控制","aria-hidden":"true"}},[this._v("#")]),this._v(" Nginx的访问控制")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("Nginx")]),this._v("对于访问权限的控制也可以通过两个方面控制。一是基于"),s("code",[this._v("IP")]),this._v("的访问控制，二是基于用户的信任登录控制。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("基于"),s("code",[this._v("IP")]),this._v("的访问控制通过"),s("code",[this._v("http_access_module")]),this._v("模块来实现，基于用户的信任登录控制通过"),s("code",[this._v("http_auth_basic_module")]),this._v("模块来实现。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"http-access-module"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http-access-module","aria-hidden":"true"}},[this._v("#")]),this._v(" http_access_module")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("这个模块允许我们设置哪些"),s("code",[this._v("ip")]),this._v("地址可以或者不能访问我们的服务。配置语法如下：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("1. 允许某些ip访问")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[t._v("syntax"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("allow")]),t._v(" address "),n("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" CIDR "),n("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" unix"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" All\ndefault"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("\ncontext"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("http")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token keyword"}},[t._v("server")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("2. 拒绝某些ip访问")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[t._v("syntax"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("deny")]),t._v(" address "),n("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" CIDR "),n("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" unix"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" All\ndefault"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("\ncontext"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("http")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token keyword"}},[t._v("server")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("address: ip地址")]),this._v(" "),s("li",[this._v("cidr: 网段地址")]),this._v(" "),s("li",[this._v("unix: socket方式的访问")]),this._v(" "),s("li",[this._v("all：所有的IP")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("下面是两个关于"),s("code",[this._v("ip")]),this._v("访问控制的配置。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("测试一：不允许我的ip访问")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("~")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("^")]),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("admin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("root")]),t._v("  "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("opt"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("app"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("code "),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("deny")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("192.168")]),n("span",{attrs:{class:"token number"}},[t._v(".144")]),n("span",{attrs:{class:"token number"}},[t._v(".1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("allow")]),t._v(" all"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),t._v("  "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("htm"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("测试二：只允许我的ip访问")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("~")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("^")]),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("admin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("root")]),t._v("  "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("opt"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("app"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("code "),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("allow")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("192.168")]),n("span",{attrs:{class:"token number"}},[t._v(".144")]),n("span",{attrs:{class:"token number"}},[t._v(".1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("deny")]),t._v(" all"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),t._v("  "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("htm"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"danger custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("WARNING")]),this._v(" "),s("p",[this._v("上面的配置只能用于客户端直连Nginx服务才会起作用")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"auth-basic-module"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#auth-basic-module","aria-hidden":"true"}},[this._v("#")]),this._v(" auth_basic_module")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("这个模块要求客户端需要使用"),s("code",[this._v("HTTP Basic Authentication")]),this._v("协议进行用户名和密码的基本认证。我们需要使用"),s("code",[this._v("auth_basic")]),this._v("开启认证的功能，同时使用"),s("code",[this._v("auth_basic_user_file")]),this._v("指定用户登录的密钥文件。配置语法如下：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[t._v("syntax"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("auth_basic")]),t._v(" string "),n("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" off"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndefault"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("auth_basic")]),t._v(" off"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ncontext"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("http")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("server")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("string")]),this._v("就是用来设置前端的弹窗title，同时也表示开启用户认证。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[t._v("syntax"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("auth_basic_user_file")]),t._v(" file"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndefault"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("--")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ncontext"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("http")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("server")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("用户登录的密钥文件我们可以通过"),s("code",[this._v("htpasswd")]),this._v("生成，比如我们设置用户登录的用户名是"),s("code",[this._v("saisai")]),this._v("，可以通过如下命令生成加密密码")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[this._v("htpasswd -c ./auth_conf saisai\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-nginx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("server")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("listen")]),t._v("       "),n("span",{attrs:{class:"token number"}},[t._v("80")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("server_name")]),t._v("  localhost"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),n("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("~")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("^")]),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("admin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("root")]),t._v("   "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("opt"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("app"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("code"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),n("span",{attrs:{class:"token keyword"}},[t._v("auth_basic")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"Auth access test!input your password"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),n("span",{attrs:{class:"token keyword"}},[t._v("auth_basic_user_file")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("auth_conf"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),t._v("  "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html "),n("span",{attrs:{class:"token keyword"}},[t._v("index")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("htm"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("当用户访问"),s("code",[this._v("http://192.168.144.129/admin.html")]),this._v("的时候，客户端就会弹窗提示用户输入用户名和密码。只有输入了正确的用户名和密码，才能允许访问页面。")])}],!1,null,null,null);e.options.__file="Nginx学习-安装_基本模块_请求限制_访问限制.md";s.default=e.exports}}]);