(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{231:function(s,t,n){"use strict";n.r(t);var a=n(0),e=Object(a.a)({},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"content"},[n("h1",[s._v("小而美的CLI开发记录")]),s._v(" "),s._m(0),s._v(" "),s._m(1),s._v(" "),s._m(2),s._v(" "),s._m(3),s._v(" "),s._m(4),n("p",[s._v("文件内容为：")]),s._v(" "),s._m(5),s._m(6),s._v(" "),s._m(7),s._v(" "),s._m(8),s._m(9),s._v(" "),s._m(10),s._m(11),s._v(" "),s._m(12),s._v(" "),s._m(13),s._m(14),s._v(" "),s._m(15),s._v(" "),s._m(16),s._m(17),s._v(" "),s._m(18),s._m(19),s._v(" "),s._m(20),s._m(21),s._v(" "),s._m(22),s._v(" "),s._m(23),s._v(" "),s._m(24),s._v(" "),s._m(25),s._v(" "),s._m(26),n("p",[s._v("我们可以把上面的命令进行分解一下：")]),s._v(" "),s._m(27),s._v(" "),n("p",[s._v("所以，一般来说命令行程序一般需要明确两部分：")]),s._v(" "),s._m(28),s._v(" "),s._m(29),s._v(" "),s._m(30),s._v(" "),s._m(31),s._v(" "),s._m(32),s._v(" "),s._m(33),n("p",[s._v("假设我们的命令运行如下：")]),s._v(" "),s._m(34),s._m(35),s._v(" "),s._m(36),n("p",[s._v("上面的命令其实和下面是等价的。")]),s._v(" "),s._m(37),s._m(38),n("p",[s._v("了解了上面的这些内容后，我们就能够开发我们的命令行程序了。关于"),n("code",[s._v("minimist")]),s._v("更多的内容请参考"),n("a",{attrs:{href:"https://github.com/substack/minimist",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/substack/minimist"),n("OutboundLink")],1),s._v("。")]),s._v(" "),s._m(39),s._v(" "),s._m(40),s._v(" "),s._m(41),s._m(42),s._v(" "),s._m(43),s._v(" "),s._m(44),s._v(" "),s._m(45),n("p",[s._v("下面，我们应该调整我们的入口文件为：")]),s._v(" "),s._m(46),s._m(47),s._v(" "),s._m(48),s._v(" "),s._m(49),n("p",[s._v("然后，在终端运行命令")]),s._v(" "),s._m(50),n("p",[s._v("就能看到如下输出")]),s._v(" "),s._m(51),s._v(" "),s._m(52),s._v(" "),s._m(53),s._v(" "),s._m(54),s._v(" "),s._m(55),s._v(" "),s._m(56),n("p",[s._v("在终端输入如下程序")]),s._v(" "),s._m(57),n("p",[s._v("会看到如下输出")]),s._v(" "),s._m(58),s._v(" "),s._m(59),s._v(" "),s._m(60),s._v(" "),s._m(61),s._v(" "),s._m(62),s._v(" "),s._m(63),s._v(" "),s._m(64),s._m(65),s._v(" "),s._m(66),s._m(67),s._v(" "),n("p",[s._v("同样，先安装这个包")]),s._v(" "),s._m(68),s._m(69),s._v(" "),s._m(70),n("p",[s._v("此时，我们在终端输入如下命令：")]),s._v(" "),s._m(71),n("p",[s._v("就能看到下面很简洁的输出：")]),s._v(" "),s._m(72),s._v(" "),n("p",[s._v("\b到这里，我们一个很简洁的命令行程序开发完成了。\b如果你感觉你开发的命令行程序很有用，那就\b不要迟疑，分享到开源社区吧。")]),s._v(" "),s._m(73),s._v(" "),s._m(74),s._v(" "),s._m(75),s._v(" "),s._m(76),s._m(77),s._v(" "),s._m(78),s._v(" "),s._m(79),s._m(80),s._v(" "),s._m(81),s._v(" "),n("p",[s._v("\b最后简单的总结一下开发\b命令行工具时候的一些基本要点。")]),s._v(" "),s._m(82)])},[function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("p",[s._v("作为一名前端开发人员，一定不会对"),n("code",[s._v("脚手架")]),s._v("感到陌生。比如"),n("code",[s._v("Vue")]),s._v("的"),n("code",[s._v("vue-cli")]),s._v("，"),n("code",[s._v("React")]),s._v("的"),n("code",[s._v("create-react-app")]),s._v("以及"),n("code",[s._v("angular")]),s._v("的"),n("code",[s._v("@angular/cli")]),s._v("等等。这些脚手架工具一般都是经过很严谨的设计，从开发到上线，都提供了开箱即来的命令。"),n("code",[s._v("脚手架")]),s._v("的本质就是一个"),n("code",[s._v("命令行工具")]),s._v("，核心也就是经过设计的"),n("code",[s._v("Node app")]),s._v("。下面就简单的介绍一下如何开发一个"),n("code",[s._v("麻雀虽小，五脏俱全")]),s._v("的"),n("code",[s._v("Node cli")]),s._v("。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("blockquote",[t("p",[this._v("这里会带着大家开发一个查看"),t("code",[this._v("github trending")]),this._v("的cli。")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"工程创建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#工程创建","aria-hidden":"true"}},[this._v("#")]),this._v(" 工程创建")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("p",[s._v("任何"),n("code",[s._v("Node cli")]),s._v("都是一个"),n("code",[s._v("package")]),s._v("。首先，我们需要创建"),n("code",[s._v("package.json")]),s._v("文件和"),n("code",[s._v("入口文件")]),s._v("。你可以选择下面任何一种方式来创建"),n("code",[s._v("package.json")]),s._v("。")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("npm init "),n("span",{attrs:{class:"token comment"}},[s._v("// 或")]),s._v("\nyarn init "),n("span",{attrs:{class:"token comment"}},[s._v("// 或")]),s._v("\ntouch "),n("span",{attrs:{class:"token keyword"}},[s._v("package")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("json\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{attrs:{class:"token string"}},[s._v('"name"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"github"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{attrs:{class:"token string"}},[s._v('"version"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"1.0.0"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{attrs:{class:"token string"}},[s._v('"license"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"MIT"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{attrs:{class:"token string"}},[s._v('"scripts"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{attrs:{class:"token string"}},[s._v('"devDependencies"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{attrs:{class:"token string"}},[s._v('"dependencies"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("blockquote",[t("p",[this._v("我们的脚手架工具的名称就是"),t("code",[this._v("github")])])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("接着，需要创建我们的入口文件"),t("code",[this._v("index.js")]),this._v(":")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("module"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[s._v("exports")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("log")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v("'Welcome to the github'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("接下来，我们就需要考虑一种方式来执行上面的程序，最好的是能够将其添加到系统的"),t("code",[this._v("path")]),this._v("中，这样就能够实现在任何地方执行我们的程序。为了实现这个功能，我们需要在根目录中创建一个"),t("code",[this._v("bin")]),this._v("目录，然后添加我们的可执行文件到这个目录中。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[this._v("mkdir bin\ntouch bin"),t("span",{attrs:{class:"token operator"}},[this._v("/")]),this._v("github\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br"),t("span",{staticClass:"line-number"},[this._v("2")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("blockquote",[t("p",[this._v("Node的命令行的bin目录是必须的。需要添加一个可执行文件到bin中作为命令行程序的入口。")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("下面，就需要在"),t("code",[this._v("bin/github")]),this._v("中加入我们入口。")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("#!/usr/bin/env node")]),s._v("\nrequire"),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v("'../'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("p",[n("code",[s._v("#!/usr/bin/env node")]),s._v("被称为"),n("code",[s._v("shebang")]),s._v("。它就是用来告诉操作系统"),n("code",[s._v("用哪一个可执行程序来执行我这个文件")]),s._v("。这里的"),n("code",[s._v("可执行程序")]),s._v("就是"),n("code",[s._v("node")]),s._v("。一般情况下，这个可执行文件应该尽量的小。因为它的目的就是为了执行我们的程序。程序的代码应该写在这个文件的外部，以便能够保持"),n("code",[s._v("模块化")]),s._v("和"),n("code",[s._v("可测试")]),s._v("。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("为了能够直接运行这个可执行文件，我们需要给予它正确的执行权限。如果你是用的是"),t("code",[this._v("UNIX")]),this._v("系统，请执行下面的程序为这个可执行文件添加直接运行的权限。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token function"}},[this._v("chmod")]),this._v(" +x bin/github\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("p",[s._v("接下来，我们需要更改我们的"),n("code",[s._v("package.json")]),s._v("文件。当我们的命令行程序被全局安装的时候能够自动的将"),n("code",[s._v("bin")]),s._v("目录添加到系统的"),n("code",[s._v("path")]),s._v("中。更改后的"),n("code",[s._v("package.json")]),s._v("文件如下：")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{attrs:{class:"token string"}},[s._v('"name"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"github"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{attrs:{class:"token string"}},[s._v('"version"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"1.0.0"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{attrs:{class:"token string"}},[s._v('"license"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"MIT"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{attrs:{class:"token string"}},[s._v('"scripts"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{attrs:{class:"token string"}},[s._v('"devDependencies"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{attrs:{class:"token string"}},[s._v('"dependencies"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{attrs:{class:"token string"}},[s._v('"bin"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{attrs:{class:"token string"}},[s._v('"github"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('"bin/github"')]),s._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("如果用户全局安装之后我们的程序后，直接运行下面的命令就能够看到"),t("code",[this._v("Welcome to the github")]),this._v("的输出。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("github\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("img",{attrs:{src:"/blog/cli2.png",alt:"cli"}})])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("p",[s._v("为了能够方便在本地测试，直接在项目的根目录下运行"),n("code",[s._v("npm link")]),s._v("命令。它会在系统的"),n("code",[s._v("path")]),s._v("中创建一个指向我们"),n("code",[s._v("bin/github")]),s._v("的"),n("code",[s._v("软链接")]),s._v("。即使没有全局安装我们的程序，我们依然能够正确的执行上述的命令。\n"),n("img",{attrs:{src:"/blog/cli1.png",alt:"cli"}})])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("至此，一个小的如"),t("code",[this._v("hello world")]),this._v("般的命令行程序算是成形了。但是，距离我们的要求还是远远不够。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"命令和参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#命令和参数","aria-hidden":"true"}},[this._v("#")]),this._v(" 命令和参数")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("先停下来好好的思考一下，运行一个命令行程序一般需要哪些东西？比如，我们使用"),t("code",[this._v("Vue")]),this._v("的脚手架常见一个简单的模版，可能会运行下面的这个命令。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("vue init webpack my-project\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ul",[n("li",[n("code",[s._v("vue")]),s._v("：可执行文件")]),s._v(" "),n("li",[n("code",[s._v("init")]),s._v("：命令。告知可执行文件用来干啥")]),s._v(" "),n("li",[n("code",[s._v("webpack")]),s._v("和"),n("code",[s._v("my-project")]),s._v("：参数。命令执行时候需要使用的。")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("ul",[t("li",[this._v("命令(commands)")]),this._v(" "),t("li",[this._v("参数(arguments)")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("其中"),t("code",[this._v("命令")]),this._v("和"),t("code",[this._v("参数")]),this._v("都可以是可选的。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("code",[this._v("命令")]),this._v("一般都是在程序中预先定义的，用来告知命令行应该采取什么样的动作。")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("p",[n("code",[s._v("参数")]),s._v("一般也是在程序中定义好的，但是传入的形式有多种，这就要求我们需要在程序中进行"),n("code",[s._v("统一化\b")]),s._v("的处理。比如，"),n("code",[s._v("--version")]),s._v("和"),n("code",[s._v("-v")]),s._v("，"),n("code",[s._v("--help")]),s._v("和"),n("code",[s._v("-h")]),s._v("等。\b"),n("strong",[s._v("最重要的是参数在传递的时候可以不按照特定的顺序。")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("为了我们程序的实用性，我们需要对传入的命令和参数进行解析。一般都会将他们转为"),t("code",[this._v("Object")]),this._v("的形式，这里我们可以借助"),t("code",[this._v("minimist")]),this._v("这个库来完成。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("yarn add minimist\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("github trend -t daily -l javascript\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("经过"),t("code",[this._v("minimist")]),this._v("解析后，结果如下：")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" \n    _"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'trend'")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n    t"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'daily'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    l"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'javascript'")]),s._v(" \n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("github tread --time daily --lang javascript\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" \n    _: "),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'tread'")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", \n    time: "),n("span",{attrs:{class:"token string"}},[s._v("'daily'")]),s._v(", \n    lang: "),n("span",{attrs:{class:"token string"}},[s._v("'javascript'")]),s._v(" \n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"脚手架核心"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#脚手架核心","aria-hidden":"true"}},[this._v("#")]),this._v(" 脚手架核心")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("在开始核心内容的开发之前，我们先创建一个"),t("code",[this._v("cmds")]),this._v("文件夹。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token function"}},[this._v("mkdir")]),this._v(" cmds\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("这个文件夹就是用来保存我们各种命令的核心代码的，其中的每一个模块都被视为是一个命令。我们所开发的"),t("code",[this._v("github")]),this._v("\b命令行先暂定支持三个基本的\b命令。")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ul",[n("li",[n("code",[s._v("trend")]),s._v("：获取github的trend中的内容")]),s._v(" "),n("li",[n("code",[s._v("version")]),s._v("：查看我们的\b脚手架版本")]),s._v(" "),n("li",[n("code",[s._v("help")]),s._v("：查看命令的使用帮助")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("在"),t("code",[this._v("cmds")]),this._v("中创建三个模块表示三个命令：")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token function"}},[this._v("cd")]),this._v(" cmds\n"),t("span",{attrs:{class:"token function"}},[this._v("touch")]),this._v(" trend.js version.js help.js\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br"),t("span",{staticClass:"line-number"},[this._v("2")]),t("br")])])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" minimist "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("require")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v("'minimist'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{attrs:{class:"token constant"}},[s._v("CMDS")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{attrs:{class:"token string"}},[s._v("'version'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("require")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v("'./cmds/version'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{attrs:{class:"token string"}},[s._v("'help'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("require")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v("'./cmds/help'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{attrs:{class:"token string"}},[s._v("'trend'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("require")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v("'./cmds/trend'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nmodule"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[s._v("exports")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" args "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("minimist")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("process"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("argv"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("slice")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token number"}},[s._v("2")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{attrs:{class:"token comment"}},[s._v("// 没有输入任何命令的时候表示 help 命令")]),s._v("\n    "),n("span",{attrs:{class:"token comment"}},[s._v("// 比如：github")]),s._v("\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("let")]),s._v(" cmd "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" args"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token number"}},[s._v("0")]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'help'")]),s._v("\n    "),n("span",{attrs:{class:"token comment"}},[s._v("// 查看版本")]),s._v("\n    "),n("span",{attrs:{class:"token comment"}},[s._v("// 比如：github -v 或者 github --version")]),s._v("\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("args"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("version "),n("span",{attrs:{class:"token operator"}},[s._v("||")]),s._v(" args"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("v"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        cmd "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'version'")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{attrs:{class:"token comment"}},[s._v("// 查看帮助")]),s._v("\n    "),n("span",{attrs:{class:"token comment"}},[s._v("// 比如：github -h 或者 github --help")]),s._v("\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("args"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("help "),n("span",{attrs:{class:"token operator"}},[s._v("||")]),s._v(" args"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("h"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        cmd "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'help'")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token constant"}},[s._v("CMDS")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("hasOwnProperty")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cmd"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{attrs:{class:"token constant"}},[s._v("CMDS")]),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("cmd"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("call")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("null")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" args"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        console"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("error")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token template-string"}},[n("span",{attrs:{class:"token string"}},[s._v('`"')]),n("span",{attrs:{class:"token interpolation"}},[n("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("cmd"),n("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),n("span",{attrs:{class:"token string"}},[s._v('" is not avaiable`')])]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"version"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#version","aria-hidden":"true"}},[this._v("#")]),this._v(" version")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("p",[s._v("我们先从最简单的"),n("code",[s._v("version")]),s._v("命令开始开发，这里我们直接使用"),n("code",[s._v("package.json")]),s._v("中的"),n("code",[s._v("version")]),s._v("字段表示即可。所以\b，我们的\b"),n("code",[s._v("version")]),s._v("命令如下：")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" version "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("require")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v("'../package.json'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nmodule"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[s._v("exports")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("log")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token template-string"}},[n("span",{attrs:{class:"token string"}},[s._v("`v")]),n("span",{attrs:{class:"token interpolation"}},[n("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("version"),n("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),n("span",{attrs:{class:"token string"}},[s._v("`")])]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("github -v "),t("span",{attrs:{class:"token comment"}},[this._v("# 或者")]),this._v("\ngithub --version\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br"),t("span",{staticClass:"line-number"},[this._v("2")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("img",{attrs:{src:"/blog/cli3.png",alt:"cli"}})])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"help"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#help","aria-hidden":"true"}},[this._v("#")]),this._v(" help")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("code",[this._v("help")]),this._v("命令主要是用来给使用者提供帮助信息的。这种帮助信息主要分为两个方面。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("ul",[t("li",[this._v("命令行的帮助信息。比如："),t("code",[this._v("github --help")])]),this._v(" "),t("li",[this._v("某个具体命令的帮助信息。比如："),t("code",[this._v("github trend --help")])])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("据此，我们的"),t("code",[this._v("help")]),this._v("命令的程序可能如下：")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{attrs:{class:"token constant"}},[s._v("HELPS")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{attrs:{class:"token string"}},[s._v("'github'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token template-string"}},[n("span",{attrs:{class:"token string"}},[s._v("`\n        github [command] <options>\n\n        trend ............. get the trend in the github\n        version ........... show package version\n        help .............. show help menu for command\n    `")])]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{attrs:{class:"token string"}},[s._v("'trend'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token template-string"}},[n("span",{attrs:{class:"token string"}},[s._v("`\n        github trend [args]\n\n        --time/-t ........ trends in a certain period of time\n        -lang/-t  ........ the trend of certain languages\n    `")])]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nmodule"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[s._v("exports")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" args "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" subCommand "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" args"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token number"}},[s._v("0")]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'help'")]),s._v("\n        "),n("span",{attrs:{class:"token operator"}},[s._v("?")]),s._v(" args"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token number"}},[s._v("1")]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" args"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token number"}},[s._v("0")]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n    console"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("log")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token constant"}},[s._v("HELPS")]),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("subCommand"),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),n("span",{attrs:{class:"token constant"}},[s._v("HELPS")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("github"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("github\n\ngithub trend -h\n\ngithub "),n("span",{attrs:{class:"token function"}},[s._v("help")]),s._v(" trend\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("img",{attrs:{src:"/blog/cli4.png",alt:"cli"}})])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("至此，我们的"),t("code",[this._v("help")]),this._v("和"),t("code",[this._v("version")]),this._v("命令已经完成。接下来我们看一下"),t("code",[this._v("trend")]),this._v("命令怎么实现。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h3",{attrs:{id:"trend"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#trend","aria-hidden":"true"}},[this._v("#")]),this._v(" trend")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("code",[this._v("trend")]),this._v("命令是我们最核心的命令。这个命令也接受两个参数")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ul",[n("li",[n("p",[n("code",[s._v("--time/-t")]),s._v("：查看的时间范围。可选值有"),n("code",[s._v("daily")]),s._v("，"),n("code",[s._v("weekly")]),s._v("，"),n("code",[s._v("monthly")])])]),s._v(" "),n("li",[n("p",[n("code",[s._v("--lang/-l")]),s._v("：指定查看的语言。默认是"),n("code",[s._v("all")])])])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("这里，我们依靠一个开源的"),t("code",[this._v("github trending")]),this._v("请求接口来实现\b数据获取的功能。为了更好的体验，我们需要加入一个"),t("code",[this._v("loading")]),this._v("来展示我们的加载过程。首先，需要安装我们的依赖。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("yarn add ora @huchenme/github-trending\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("\b接下来，就是我们核心的"),t("code",[this._v("trend")]),this._v("抓取代码了。")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" ora "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("require")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v("'ora'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" fetchRepositories "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("require")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v("'@huchenme/github-trending'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{attrs:{class:"token constant"}},[s._v("TIMES")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token string"}},[s._v("'daily'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'weekly'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'monthly'")]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\nmodule"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("async")]),s._v(" args "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" lang "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" args"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("l "),n("span",{attrs:{class:"token operator"}},[s._v("||")]),s._v(" args"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lang "),n("span",{attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'all'")]),s._v("\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" time "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" args"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("t "),n("span",{attrs:{class:"token operator"}},[s._v("||")]),s._v(" args"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("time "),n("span",{attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'daily'")]),s._v("\n    \n    "),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token constant"}},[s._v("TIMES")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("includes")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("time"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        console"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("log")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token template-string"}},[n("span",{attrs:{class:"token string"}},[s._v('`The time argument is one of the "daily" "weekly" or "monthly"`')])]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        process"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("exit")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token number"}},[s._v("1")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" spinner "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("ora")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v("'正在获取...'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("start")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" repositories "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("fetchRepositories")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            language"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" lang"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            since"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" time\n        "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n        spinner"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("stop")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("catch")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token class-name"}},[s._v("e")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        console"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("error")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v("'获取失败，稍后重试！！！'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        spinner"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("stop")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        process"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("exit")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token number"}},[s._v("1")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("至此，我们的\b命令行工具已经完成了"),t("code",[this._v("90%")]),this._v("。最后一步，把我们的输出结果美化一下。这里，我们借助"),t("code",[this._v("cli-table2")]),this._v("包来帮助我们完成。\b")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("yarn add cli-table2\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("最终，我们的"),t("code",[this._v("trend")]),this._v("代码如下：")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" ora "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("require")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v("'ora'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" fetchRepositories "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("require")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v("'@huchenme/github-trending'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" Table "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("require")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v("'cli-table2'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{attrs:{class:"token constant"}},[s._v("TIMES")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token string"}},[s._v("'daily'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'weekly'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'monthly'")]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" table "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("Table")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    head"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token string"}},[s._v("'名称'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'作者'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'url'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'star'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'language'")]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmodule"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("async")]),s._v(" args "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" lang "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" args"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("l "),n("span",{attrs:{class:"token operator"}},[s._v("||")]),s._v(" args"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lang "),n("span",{attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'all'")]),s._v("\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" time "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" args"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("t "),n("span",{attrs:{class:"token operator"}},[s._v("||")]),s._v(" args"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("time "),n("span",{attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'daily'")]),s._v("\n    \n    "),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token operator"}},[s._v("!")]),n("span",{attrs:{class:"token constant"}},[s._v("TIMES")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("includes")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("time"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        console"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("log")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token template-string"}},[n("span",{attrs:{class:"token string"}},[s._v('`The time argument is one of the "daily" "weekly" or "monthly"`')])]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        process"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("exit")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token number"}},[s._v("1")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" spinner "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("ora")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v("'正在获取...'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("start")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" repositories "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("fetchRepositories")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            language"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" lang"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            since"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" time\n        "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        repositories"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("forEach")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rep "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" author"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" url"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" language"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" stars "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" rep\n            table"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("push")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                name"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                author"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                url"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                stars"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                language\n            "),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        spinner"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("stop")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        console"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("log")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("table"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("toString")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("catch")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token class-name"}},[s._v("e")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        console"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("error")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v("'获取失败，稍后重试！！！'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        spinner"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("stop")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        process"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("exit")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token number"}},[s._v("1")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("github trend -l javascript -t daily\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("img",{attrs:{src:"/blog/cli5.png",alt:"cli"}})])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"其它注意事项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其它注意事项","aria-hidden":"true"}},[this._v("#")]),this._v(" 其它注意事项")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("在命令行程序开发完成后，我们需要对我们的"),t("code",[this._v("package.json")]),this._v("文件做一点点的修改。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("ul",[t("li",[this._v("设置"),t("code",[this._v("engine")]),this._v("字段")])])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{attrs:{class:"token string"}},[s._v('"engine"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{attrs:{class:"token string"}},[s._v('"node"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v('">=8"')]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("p",[n("code",[s._v("engine")]),s._v("字段能够确保我们的命令行运行在"),n("code",[s._v("node")]),s._v("合适的版本上。因为我们使用了"),n("code",[s._v("async/await")]),s._v("的语法，所以，我们要求"),n("code",[s._v("node")]),s._v("的版本应该"),n("code",[s._v(">=8")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("ul",[t("li",[this._v("设置"),t("code",[this._v("preferGlobal")]),this._v("字段")])])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{attrs:{class:"token string"}},[s._v('"preferGlobal"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("code",[this._v("preferGlobal")]),this._v("字段在用户局部安装("),t("code",[this._v("yarn add github")]),this._v(")的时候会给予警告。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结","aria-hidden":"true"}},[this._v("#")]),this._v(" \b总结")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ul",[n("li",[s._v("可执行文件作为"),n("code",[s._v("cli")]),s._v("工具的入口，应该只在其中执行主函数。")]),s._v(" "),n("li",[s._v("命令文件只在\b必要的时候\b进行"),n("code",[s._v("require")])]),s._v(" "),n("li",[s._v("提供"),n("code",[s._v("help")]),s._v("和"),n("code",[s._v("version")]),s._v("命令")]),s._v(" "),n("li",[s._v("尽量保持命令行文件小--因为它们的主要目的就是调用函数")]),s._v(" "),n("li",[s._v("必要的时候展示一下"),n("code",[s._v("loading")])]),s._v(" "),n("li",[s._v("退出的时候伴随着正确的状态码")])])}],!1,null,null,null);e.options.__file="小而美的CLI开发记录.md";t.default=e.exports}}]);